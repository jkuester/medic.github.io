<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.71.1"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Database schema conventions | Community Health Toolkit</title><meta property="og:title" content="Database schema conventions"><meta property="og:description" content="Schema for database objects"><meta property="og:type" content="article"><meta property="og:url" content="https://docs.communityhealthtoolkit.org/core/overview/db-schema/"><meta property="article:modified_time" content="2021-03-24T06:41:04+02:00"><meta property="og:site_name" content="Community Health Toolkit"><meta itemprop=name content="Database schema conventions"><meta itemprop=description content="Schema for database objects"><meta itemprop=dateModified content="2021-03-24T06:41:04+02:00"><meta itemprop=wordCount content="1567"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Database schema conventions"><meta name=twitter:description content="Schema for database objects"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-168418637-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=/scss/main.min.b49a62ff85f2711d9a7ea2511925db921a52b0a75270b09a9a4021dc2217b498.css as=style><link href=/scss/main.min.b49a62ff85f2711d9a7ea2511925db921a52b0a75270b09a9a4021dc2217b498.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Community Health Toolkit</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/apps/reference/><span>Reference</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class=td-sidebar-nav__section><a class="td-sidebar-link td-sidebar-link__page" id=m-why-the-cht href=/why-the-cht/>Why the CHT?</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">CHT Applications&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=apps><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/concepts/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Concepts&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsaccess href=/apps/concepts/access/>Access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsnavigation href=/apps/concepts/navigation/>Navigation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsforms href=/apps/concepts/forms/>Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptscare-guides href=/apps/concepts/care-guides/>Care Guides</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsworkflows href=/apps/concepts/workflows/>Workflows</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptshierarchy href=/apps/concepts/hierarchy/>Hierarchies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsusers href=/apps/concepts/users/>Users</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsinteroperability href=/apps/concepts/interoperability/>Interoperability</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsprerequisites href=/apps/concepts/prerequisites/>Prerequisites</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Features&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeatures><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/contacts/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Contacts&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturescontacts></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/messaging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Messaging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesmessaging></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/reports/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Reports&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesreports></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/supervision/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Supervision&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturessupervision></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/tasks/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tasks&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturestasks></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/targets/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Targets&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturestargets></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/uhc-mode/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">UHC Mode&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesuhc-mode></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/admin/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">App Management&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesadmin></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/integrations/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Integrations&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesintegrations><a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsandroid href=/apps/features/integrations/android/>Android</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationscustom href=/apps/features/integrations/custom/>Custom</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsdhis2 href=/apps/features/integrations/dhis2/>DHIS2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsopenmrs href=/apps/features/integrations/openmrs/>OpenMRS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsoppia href=/apps/features/integrations/oppia/>OppiaMobile</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsrapidpro href=/apps/features/integrations/rapidpro/>RapidPro</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/examples/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Examples&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsexamples><a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesanc href=/apps/examples/anc/>Maternal & Newborn Health</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescontact-tracing href=/apps/examples/contact-tracing/>Contact Tracing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesphc-covid href=/apps/examples/phc-covid/>COVID-19 Adaptations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescovid-education href=/apps/examples/covid-education/>COVID-19 Education</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescovid-rdt-reference-app href=/apps/examples/covid-rdt-reference-app/>COVID-19 Testing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesebs href=/apps/examples/ebs/>Event Based Surveillance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexampleslearning-care href=/apps/examples/learning-care/>Learning & Care</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplestraining href=/apps/examples/training/>Remote Training</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/tutorials/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tutorials&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appstutorials><a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialslocal-setup href=/apps/tutorials/local-setup/>Local Setup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-and-users-1 href=/apps/tutorials/contact-and-users-1/>Contacts + Users 1</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-and-users-2 href=/apps/tutorials/contact-and-users-2/>Contacts + Users 2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapplication-settings href=/apps/tutorials/application-settings/>Application Settings</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialssms-forms href=/apps/tutorials/sms-forms/>SMS Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialssms-schedules href=/apps/tutorials/sms-schedules/>SMS Schedules</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapp-forms href=/apps/tutorials/app-forms/>App Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsform-properties href=/apps/tutorials/form-properties/>Form Properties</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstasks-1 href=/apps/tutorials/tasks-1/>Tasks</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstargets href=/apps/tutorials/targets/>Targets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-summary href=/apps/tutorials/contact-summary/>Contact Summary</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsdeath-reporting href=/apps/tutorials/death-reporting/>Death Report Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscondition-cards href=/apps/tutorials/condition-cards/>Condition Cards</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialslocalizing-cht href=/apps/tutorials/localizing-cht/>Localization</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapplication-graphics href=/apps/tutorials/application-graphics/>Branding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstasks-2 href=/apps/tutorials/tasks-2/>Complex Tasks</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Quick Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguides><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/onboarding/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Onboarding&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesonboarding></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/data/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Data&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdata><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatahydration href=/apps/guides/data/hydration/>Document hydration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatausers-bulk-load href=/apps/guides/data/users-bulk-load/>Bulk Load Users</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatatraining-instance href=/apps/guides/data/training-instance/>Training Instance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdataimpact-metrics href=/apps/guides/data/impact-metrics/>CHT Impact Metrics</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatacsv-to-docs href=/apps/guides/data/csv-to-docs/>CSV to Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatainvalid-reports href=/apps/guides/data/invalid-reports/>Invalid Reports</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/database/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Database&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdatabase><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasemuting_in_dashboards href=/apps/guides/database/muting_in_dashboards/>Contact Muting in SQL queries</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasecouch2pg-oom-errors href=/apps/guides/database/couch2pg-oom-errors/>Couch2pg Memory Errors</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasecouchdb-authentication href=/apps/guides/database/couchdb-authentication/>CouchDB Authentication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasedatabase-conflicts href=/apps/guides/database/database-conflicts/>Database Conflicts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabaserdbms-from-mac href=/apps/guides/database/rdbms-from-mac/>RDBMS from MacOS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabaserdbms-from-windows href=/apps/guides/database/rdbms-from-windows/>RDBMS from Windows</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/debugging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Debugging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdebugging><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingobtaining-logs href=/apps/guides/debugging/obtaining-logs/>Obtaining Logs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingreplicating-production-data-locally href=/apps/guides/debugging/replicating-production-data-locally/>Production Data</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingsecure-sharing-of-developer-instance href=/apps/guides/debugging/secure-sharing-of-developer-instance/>Securely Sharing Your Development Environment</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/forms/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Forms&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesforms><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsuhc-mode href=/apps/guides/forms/uhc-mode/>UHC Mode</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsadditional-docs href=/apps/guides/forms/additional-docs/>Additional Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsapp-form-sms href=/apps/guides/forms/app-form-sms/>App Form SMS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformscontact-forms href=/apps/guides/forms/contact-forms/>Contact Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsgoogle-drive href=/apps/guides/forms/google-drive/>Fetching forms from Google Drive</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsmultimedia href=/apps/guides/forms/multimedia/>Multimedia in Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformswealth-quintiles href=/apps/guides/forms/wealth-quintiles/>Quintiles</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsreport-titles href=/apps/guides/forms/report-titles/>Report Titles</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/hosting/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Hosting&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguideshosting><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingrequirements href=/apps/guides/hosting/requirements/>Requirements</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingec2-setup-guide href=/apps/guides/hosting/ec2-setup-guide/>AWS Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingself-hosting href=/apps/guides/hosting/self-hosting/>Self Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingapp-developer href=/apps/guides/hosting/app-developer/>App Developer Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingssl-cert-install href=/apps/guides/hosting/ssl-cert-install/>SSL Cert Install</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingoffline href=/apps/guides/hosting/offline/>Offline Hosting</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/integrations/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Integrations&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesintegrations><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/integrations/best-practices/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Best Practices&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesintegrationsbest-practices><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsbest-practicesrapidpro href=/apps/guides/integrations/best-practices/rapidpro/>RapidPro</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsdhis2-aggregate href=/apps/guides/integrations/dhis2-aggregate/>DHIS2 Aggregate</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsopenmrs href=/apps/guides/integrations/openmrs/>OpenMRS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsoppia href=/apps/guides/integrations/oppia/>OppiaMobile</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsrapidpro href=/apps/guides/integrations/rapidpro/>RapidPro</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Messaging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaging><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/gateways/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Gateways&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaginggateways><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/gateways/gateway/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">CHT Gateway&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaginggatewaysgateway><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewayconfiguration href=/apps/guides/messaging/gateways/gateway/configuration/>Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewayphones href=/apps/guides/messaging/gateways/gateway/phones/>Phones</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewaytroubleshooting href=/apps/guides/messaging/gateways/gateway/troubleshooting/>Troubleshooting</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysafricas-talking href=/apps/guides/messaging/gateways/africas-talking/>Africa's Talking</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysrapidpro href=/apps/guides/messaging/gateways/rapidpro/>RapidPro</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingsms-states href=/apps/guides/messaging/sms-states/>SMS States</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingshortcodes href=/apps/guides/messaging/shortcodes/>Contact IDs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingmessage-loops href=/apps/guides/messaging/message-loops/>Message Loops</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/performance/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Performance&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesperformance><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancepurging href=/apps/guides/performance/purging/>Purging</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancereplication href=/apps/guides/performance/replication/>Replication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancetelemetry href=/apps/guides/performance/telemetry/>Telemetry</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/privacy/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Privacy&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesprivacy><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesprivacyprivacy-policy href=/apps/guides/privacy/privacy-policy/>Adding Policies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesprivacypolicy href=/apps/guides/privacy/policy/>Medic’s Policy</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/security/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Security&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidessecurity><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidessecuritysecuring-android href=/apps/guides/security/securing-android/>Securing Android</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/tasks/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tasks&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidestasks><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestaskspass-data-to-form href=/apps/guides/tasks/pass-data-to-form/>Passing Data from Tasks to Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestasksquery-task-data href=/apps/guides/tasks/query-task-data/>Querying Task Documents</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestaskstask-schema-parameters href=/apps/guides/tasks/task-schema-parameters/>Task Schema Parameters</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/updates/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Updates&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesupdates><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesupdatesmoving-contacts href=/apps/guides/updates/moving-contacts/>Moving Contacts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesupdatescollect-forms-update href=/apps/guides/updates/collect-forms-update/>Remote Collect Update</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Reference&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreference><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapi href=/apps/reference/api/>API</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/forms/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">forms/&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreferenceforms><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformsapp href=/apps/reference/forms/app/>app</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformscollect href=/apps/reference/forms/collect/>collect</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformscontact href=/apps/reference/forms/contact/>contact</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceresources href=/apps/reference/resources/>resources/</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetranslations href=/apps/reference/translations/>translations/</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/app-settings/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">app_settings.json&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreferenceapp-settings><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsaccept_case_reports href=/apps/reference/app-settings/accept_case_reports/>.accept_case_reports</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingshierarchy href=/apps/reference/app-settings/hierarchy/>.contact_types</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsdhis2 href=/apps/reference/app-settings/dhis2/>.dhis_data_sets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsforms href=/apps/reference/app-settings/forms/>.forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsheader_tabs href=/apps/reference/app-settings/header_tabs/>.header_tabs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsoutbound href=/apps/reference/app-settings/outbound/>.outbound</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingspatient_reports href=/apps/reference/app-settings/patient_reports/>.patient_reports</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsuser-permissions href=/apps/reference/app-settings/user-permissions/>.permissions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsregistrations href=/apps/reference/app-settings/registrations/>.registrations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreminders href=/apps/reference/app-settings/reminders/>.reminders</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreplication_depth href=/apps/reference/app-settings/replication_depth/>.replication_depth</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreplications href=/apps/reference/app-settings/replications/>.replications</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsuser-roles href=/apps/reference/app-settings/user-roles/>.roles</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsschedules href=/apps/reference/app-settings/schedules/>.schedules</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingssms href=/apps/reference/app-settings/sms/>.sms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingstoken_login href=/apps/reference/app-settings/token_login/>.token_login</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingstransitions href=/apps/reference/app-settings/transitions/>.transitions</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencecontact-page href=/apps/reference/contact-page/>contact-summary.templated.js</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetargets href=/apps/reference/targets/>targets.js</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetasks href=/apps/reference/tasks/>tasks.js</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section">CHT Core Framework&nbsp;&nbsp;<i class="fas fa-caret-down"></i></a></li><ul><li class="collapse show" id=core><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/overview/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section">Overview&nbsp;&nbsp;<i class="fas fa-caret-down"></i></a></li><ul><li class="collapse show" id=coreoverview><a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewarchitecture href=/core/overview/architecture/>Architecture</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewroadmap href=/core/overview/roadmap/>Roadmap</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-coreoverviewdb-schema href=/core/overview/db-schema/>Database Schema</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewoffline-first href=/core/overview/offline-first/>Offline-First</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewpwa href=/core/overview/pwa/>Progressive Web App</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewdata-flows-for-analytics href=/core/overview/data-flows-for-analytics/>Data Flows</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewtransitions href=/core/overview/transitions/>Sentinel Transitions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewtranslations href=/core/overview/translations/>Translations</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/releases/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Releases&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=corereleases><a class="td-sidebar-link td-sidebar-link__page" id=m-corereleasesfeature_releases href=/core/releases/feature_releases/>Feature Releases</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreguides><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesreleasing href=/core/guides/releasing/>Releasing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesupdate-dependencies href=/core/guides/update-dependencies/>Dependencies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesfixing-e2e-tests href=/core/guides/fixing-e2e-tests/>E2E Tests</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/guides/android/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Android&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreguidesandroid><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroiddevelopment-setup href=/core/guides/android/development-setup/>Development Environment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidreleasing href=/core/guides/android/releasing/>Releasing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidpublishing href=/core/guides/android/publishing/>Publishing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidbranding href=/core/guides/android/branding/>CHT Android Flavors</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesusing-npm href=/core/guides/using-npm/>Using NPM</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesusing-windows href=/core/guides/using-windows/>Windows Development</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesdocker-setup href=/core/guides/docker-setup/>Docker Use</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Design System&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=design><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/personas/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Personas&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designpersonas><a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaschw-janet href=/design/personas/chw-janet/>CHW</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaschw-supervisor-ann href=/design/personas/chw-supervisor-ann/>CHW Supervisor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasregional-manager-christina href=/design/personas/regional-manager-christina/>Regional Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasnurse-mary href=/design/personas/nurse-mary/>Nurse</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasdata-manager-paul href=/design/personas/data-manager-paul/>Data Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasapp-builder href=/design/personas/app-builder/>App Builders</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/personas/partners/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Partners&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designpersonaspartners><a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnersimplementers href=/design/personas/partners/implementers/>Implementers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnerslocal-governments href=/design/personas/partners/local-governments/>Local Gov</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnersnational-governments href=/design/personas/partners/national-governments/>National Gov</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/best-practices/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Best Practices&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designbest-practices></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/components/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Component Library&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designcomponents></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Icon Library&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designicons><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/forms_tasks_targets/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Forms, Tasks, Targets&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designiconsforms_tasks_targets></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/people_and_places/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">People and Places&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designiconspeople_and_places></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Quick Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designguides><a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesdesigning-interviews href=/design/guides/designing-interviews/>User Interviews</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesempathy-map href=/design/guides/empathy-map/>Empathy Map</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesproblem-statement href=/design/guides/problem-statement/>Problem Statement</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesmapping-hierarchy href=/design/guides/mapping-hierarchy/>Mapping Hierarchy</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/mockups/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Mockups&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designmockups></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Contributing&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contribute><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/code/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Code&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contributecode><a class="td-sidebar-link td-sidebar-link__page" id=m-contributecodeworkflow href=/contribute/code/workflow/>Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributecodestyle-guide href=/contribute/code/style-guide/>Style Guide</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/docs/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Documentation&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contributedocs><a class="td-sidebar-link td-sidebar-link__page" id=m-contributedocsworkflow href=/contribute/docs/workflow/>Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributedocsstyle-guide href=/contribute/docs/style-guide/>Style Guide</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-contributecode-of-conduct href=/contribute/code-of-conduct/>Code of Conduct</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-glossary href=/glossary/>Glossary</a></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/medic/cht-docs/edit/main/content/en/core/overview/db-schema.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/medic/cht-docs/issues/new?title=Improve+%27Database%20schema%20conventions%27&labels=enhancement&body=Page:+/core/overview/db-schema/%0aVersion:+2021-03-24%2006:41:04%20+0200%20+0200%0a---" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/medic/cht-core/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#general-record-data-structure>General record data structure</a></li><li><a href=#contacts-persons-and-places>Contacts (Persons and Places)</a><ul><li><a href=#places>Places</a></li><li><a href=#people>People</a></li><li><a href=#parent-hierarchy-representation>Parent hierarchy representation</a></li></ul></li><li><a href=#reports>Reports</a></li><li><a href=#forms>Forms</a></li><li><a href=#users>Users</a></li><li><a href=#tasks>Tasks</a></li><li><a href=#targets>Targets</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://docs.communityhealthtoolkit.org/core/>CHT Core Framework</a></li><li class=breadcrumb-item><a href=https://docs.communityhealthtoolkit.org/core/overview/>Overview</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://docs.communityhealthtoolkit.org/core/overview/db-schema/>Database Schema</a></li></ol></nav><div class=td-content><h1>Database schema conventions</h1><div class=lead>Schema for database objects</div><p>CouchDB (and PouchDB in the browser) is a JSON-based NoSQL datastore that we use to store our data. While unlike SQL databases there is no enforced schema, code still follows conventions, and this document aims to describe the schema as defined by how our code operates.</p><p>In this document &ldquo;record&rdquo; means a JSON object that resides in CouchDB or PouchDB.</p><h2 id=general-record-data-structure>General record data structure</h2><table><thead><tr><th>Property</th><th>Description</th><th>Required by</th></tr></thead><tbody><tr><td><code>_id</code></td><td>CouchDB&rsquo;s unique identifier of the record</td><td>all records</td></tr><tr><td><code>_rev</code></td><td>CouchDB&rsquo;s revision marker</td><td>all records</td></tr><tr><td><code>type</code></td><td>The general type of the document, see below</td><td>all user-created* documents</td></tr><tr><td><code>reported_date</code></td><td>Numerical timestamp of when the document is first created</td><td>all user-created documents</td></tr></tbody></table><ul><li>User-created documents here generally means contacts and reports, but may extend further.</li></ul><h2 id=contacts-persons-and-places>Contacts (Persons and Places)</h2><p>Contacts are either places (e.g. clinic), groupings (e.g. family) or people (e.g. a patient or CHW).</p><p>The <code>type</code> property of contact records depends on the version of Medic you are running:</p><ul><li>If you are running 3.7 or later you get to <a href=https://docs.communityhealthtoolkit.org/apps/reference/app-settings/hierarchy/#app_settingsjson-contact_types>configure your contact hierarchy</a>, and the <code>type</code> of contacts is <code>contact</code>, and the configured type is in the <code>contact_type</code> property.</li><li>In earlier versions the type depended on hierarchical location of the contact. There are 3 hard coded place types: <code>district_hospital</code>, <code>health_centre</code> and <code>clinic</code> and one people type <code>person</code>. These place names are often meaningless (hence the configurable contact hierarchy in later versions) to the configured project, and are textually (ie in the UI not in data structures) renamed to mean other things. For example, as <code>clinic</code> is the lowest level it is often used to represent a family.</li></ul><h3 id=places>Places</h3><p>Represent either an actual physical location such as a clinic, or a grouping such as a family or region.</p><p>Unless a place is at the top of the hierarchy it has a <code>parent</code> place.</p><p>Each location has a primary contact, which is a <code>person</code> contact stored in the <code>contact</code> property.</p><h3 id=people>People</h3><p>People are both patients in the system and users of the system, such as CHWs or Nurses. Users have additional records marking them as users of the system (see <a href=#users>User</a> below).</p><p>People always have a <code>parent</code> place.</p><h3 id=parent-hierarchy-representation>Parent hierarchy representation</h3><p>Contacts <strong>store</strong> their parent hierarchy as a minified hierarchical structure, which records the <code>_id</code> of each parent up until the top of the hierarchy:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;person&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A patient&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clinic-id&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;health_centre-id&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;district_hospital-id&#39;</span>
      <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>}</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>Generally when contacts are <strong>used</strong> in the app they are first &ldquo;hydrated&rdquo;, with the rest of the information filled in from their parent&rsquo;s place documents:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;person&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A patient&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clinic-id&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A clinic&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>reported_date</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;health_centre-id&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A Health Centre&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>reported_date</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1134</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;district_hospital-id&#39;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;THE District Hospital&#39;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000>reported_date</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1034</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>}</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p><em>See Also</em>: <a href=https://docs.communityhealthtoolkit.org/apps/guides/data/hydration/>Document hydration</a></p><p>As of version <strong>3.10</strong>, you can connect contacts with other documents via the <code>linked_docs</code> property. This allows the app to have access to these linked documents when the contact is used.</p><p>Like the parent hierarchy, linked docs are stored as a minified object, where every linked doc is identified by a string tag and the UUID of the document it represents.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;person&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A patient&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clinic-id&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000>linked_docs</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>custom_tag1</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some-contact-id&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>custom_tag2</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;other-contact-id&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>custom_tag3</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;report-id&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000;font-weight:700>},</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>Linked docs are shallowly &ldquo;hydrated&rdquo; along with the parent hierarchy:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;person&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A patient&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clinic-id&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A clinic&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>reported_date</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;health_centre-id&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;A Health Centre&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>reported_date</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1134</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;district_hospital-id&#39;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;THE District Hospital&#39;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000>reported_date</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1034</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>}</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000>linked_docs</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>custom_tag1</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some-contact-id&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some contact&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;person&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;other-clinic&#39;</span> <span style=color:#000;font-weight:700>},</span>
      <span style=color:#000>reported_date</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>4569</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#000>custom_tag2</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;other-contact-id&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;other contact&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>type</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clinic&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>parent</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;health_center&#39;</span> <span style=color:#000;font-weight:700>},</span>
      <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#000>custom_tag3</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;report-id&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>form</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;FORM&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#000>contact</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>_id</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;submitter-id&#39;</span> <span style=color:#000;font-weight:700>},</span>
      <span style=color:#000;font-weight:700>...</span> <span style=color:#8f5902;font-style:italic>// etc
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000;font-weight:700>},</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=reports>Reports</h2><p>Reports are created by users filling out and submitting forms, as well as sending in SMS.</p><p>All reports:</p><ul><li>Use the <code>data_record</code> type</li><li>Have their fields stored in the <code>fields</code> property</li><li>Have the report author&rsquo;s phone number (if it exists) stored in the <code>from</code> field</li><li>Store the form&rsquo;s identifier in the <code>form</code> field</li><li>May have a <code>contact</code> property, which is a minified version of the report author&rsquo;s contact and its hierarchy (see above)</li></ul><p>Reports can be about people or places.</p><p>Reports about people should have one or more of:</p><ul><li>A patient shortcode, found at <code>doc.patient_id</code> or <code>doc.fields.patient_id</code></li><li>A patient record&rsquo;s <code>_id</code>, found at <code>doc.patient_uuid</code> or <code>doc.fields.patient_uuid</code>, as well as potientially in the same locations as the shortcode</li></ul><p>Reports about places should have a place&rsquo;s shortcode, found at <code>doc.place_id</code> or <code>doc.fields.place_id</code>.</p><p>Additionally, SMS reports:</p><ul><li>Have an <code>sms_message</code> property which contains, among other things, the raw SMS</li><li>May not have a <code>contact</code> property if the SMS comes from a phone number that does not have an associated contact</li></ul><p>Additionally, XML reports:</p><ul><li>Have the XML file that Enketo (the XForm renderer used) generates as an attachment</li><li>Have a <code>content_type</code> property of <code>xml</code></li></ul><h2 id=forms>Forms</h2><p>SMS forms are defined in <a href=https://docs.communityhealthtoolkit.org/apps/reference/app-settings/patient_reports/#app_settingsjson-patient_reports>application config</a>.</p><p>XML forms are stored in the database and have:</p><ul><li>An <code>_id</code> of <code>form:&lt;formname></code></li><li>The <code>type</code> of <code>form</code></li><li>The actual XML Xforms definition attached</li></ul><p>XML forms are defined as XForm XML files</p><h2 id=users>Users</h2><p>Users represent credentials and roles / permissions for accessing the application. This can either be:</p><ul><li>people who can log into the application, such as CHWs or Nurses</li><li>or credentials granting external software restricted permissions to perform certain tasks, such as allowing an external service permission to write reports via the api.</li></ul><p>User records have at least:</p><ul><li>An <code>_id</code> of <code>org.couchdb.user:&lt;username></code></li><li>A <code>name</code> which is the same as <code>&lt;username></code> above</li><li>A <code>roles</code> array</li></ul><p>There are two slightly different copies of this record stored.</p><p>The record in the <code>_users</code> database includes:</p><ul><li>The <code>type</code> of <code>user</code></li><li>The password hash and associated data</li></ul><p>The <code>_users</code> database is what CouchDB uses for authentication and is only editable by administrative users, so is authoritive when it comes to roles and the like.</p><p>The <code>medic</code> database stores a copy of roles and permissions along with:</p><ul><li>The <code>type</code> of <code>user-settings</code></li><li>They may have a <code>contact_id</code> field that is the <code>_id</code> of the <em>person</em> that the user is attached to</li><li>They may also have a <code>facility_id</code> field that is the <code>_id</code> of the <em>place</em> that the user is attached to</li><li>They may also have a <code>known</code> field. If this field is <code>true</code>, it means the user has logged in once and will no longer be shown the tour by default. Otherwise, it will be <code>undefined</code>.</li></ul><p>Note that SMS users do not have a users record: their phone number will be attached to a <code>person</code> record, but they do not have a user because they do not access the application.</p><p>Users then, can be represented by up to 3 docs:</p><ul><li>a <code>person</code> document that represents a physical human being in our hierarchy of places and people</li><li>a <code>users</code> document that represents authorisation and authentication information for physical people or authenticated external services</li><li>a <code>user-settings</code> document that ties the <code>user</code> and <code>person</code> documents together</li></ul><h2 id=tasks>Tasks</h2><p><a href=https://docs.communityhealthtoolkit.org/apps/reference/tasks/#tasksjs>Partner configuration code</a> running inside the Core Framework can cause tasks to appear within the Tasks tab. Each task in the tab is powered by a task document. Task documents are:</p><ul><li>updated only after the data for their emitting contact changes or every 7 days</li><li>created in the database for any task due within the last 60 days</li><li>immutable once their state is &ldquo;terminal&rdquo; (Cancelled, Completed, Failed)</li></ul><table><thead><tr><th>State</th><th>Description</th></tr></thead><tbody><tr><td>Draft</td><td>Task has been calculated but it is scheduled in the future</td></tr><tr><td>Ready</td><td>Task is currently showing to the user</td></tr><tr><td>Cancelled</td><td>Task was not emitted when refreshing the requester&rsquo;s data. Task has invalid partner emission.</td></tr><tr><td>Completed</td><td>Task was emitted with { resolved: true }</td></tr><tr><td>Failed</td><td>Task was never terminated and the endDate has past</td></tr></tbody></table><table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td>user</td><td>The user settings id of the user who calculated and created the document. Used for controlling replication. (eg. <code>org.couchdb.user:agatha</code>)</td></tr><tr><td>requester</td><td>The guid of the contact whose data brought about the creation of the document. Used for controlling cancellation.</td></tr><tr><td>owner</td><td>The guid of the contact whose profile this task will appear on in the contact&rsquo;s tab.</td></tr><tr><td>forId</td><td>If completing a task&rsquo;s action opens a form. Completing the form creates a report. <code>forId</code> is the guid of the contact information that will be passed into the form. For most forms, the resulting report will be associated with this contact.</td></tr><tr><td>emission</td><td>Minified task data emitted from the partner code.</td></tr><tr><td>stateHistory</td><td>Each time the state attribute changes, the time of the change is recorded in the state history.</td></tr></tbody></table><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;task~org.couchdb.user:agatha~pregReport~pregnancy-facility-visit-reminder~2~523435132468&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;task&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;authoredOn&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>523435132468</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;user&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;org.couchdb.user:agatha&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;requester&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;requester-contact-guid&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;owner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;owner-contact-guid&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;state&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Ready&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;emission&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;pregReport~pregnancy-facility-visit-reminder~2&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;forId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;for-contact-guid&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;dueDate&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2000-01-01&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;startDate&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1999-12-29&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;endDate&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2000-01-08&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#a40000>...</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;stateHistory&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[{</span>
    <span style=color:#204a87;font-weight:700>&#34;state&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Ready&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;timestamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>523435132468</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000;font-weight:700>}],</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=targets>Targets</h2><p><a href=https://docs.communityhealthtoolkit.org/apps/reference/targets/#targetsjs>Partner configuration code</a> can configure targets to appear within the Targets/Analytics tab. Target documents are:</p><ul><li>one per analytics reporting period</li><li>updated when the user loads the application or when they view the targets tab</li><li>updated a maximum of once per day</li></ul><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;target~2000-01~user-contact-guid~org.couchdb.user:agatha&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;target&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;user&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;org.couchdb.user:agatha&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;owner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;user-contact-guid&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;updated_date&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>523435132468</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;targets&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
    <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;deaths-this-month&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#a40000>...</span>
      <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;pass&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;total&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>15</span>
      <span style=color:#000;font-weight:700>}</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#a40000>...</span>
  <span style=color:#000;font-weight:700>]</span>
<span style=color:#000;font-weight:700>}</span>

</code></pre></div><h2 id=related-content>Related Content</h2><div class=section-index><hr class=panel-line><div class=entry><h5><a href=/apps/guides/database/>CHT Applications >
Quick Guides >
Database</a></h5><p class=one-liner>Managing databases used by CHT applications</p></div><div class=entry><h5><a href=/apps/reference/contact-page/>CHT Applications >
Reference >
contact-summary.templated.js</a></h5><p class=one-liner>Contact Pages: Customizing the fields, cards, and actions on profile pages</p></div><div class=entry><h5><a href=/apps/reference/targets/>CHT Applications >
Reference >
targets.js</a></h5><p class=one-liner>Targets: Definition of target widgets calculated and seen in the app</p></div><div class=entry><h5><a href=/apps/reference/tasks/>CHT Applications >
Reference >
tasks.js</a></h5><p class=one-liner>Tasks: Definition of tasks shown to app users</p></div></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/medic/cht-docs/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/medic/cht-docs/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified 24.03.2021: <a href=https://github.com/medic/cht-docs/commit/9b74dc0d9f1b3ed2d98dd3f01f28d590509c472b>Updates documentation about supporting places as subjects in SMS (#457) (9b74dc0)</a><div class="d-xl-none d-print-none meta-links"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/medic/cht-docs/edit/main/content/en/core/overview/db-schema.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/medic/cht-docs/issues/new?title=Improve+%27Database%20schema%20conventions%27&labels=enhancement&body=Page:+/core/overview/db-schema/%0aVersion:+2021-03-24%2006:41:04%20+0200%20+0200%0a---" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/medic/cht-core/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div></div></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 CHT All Rights Reserved</small>
<small class=ml-1><a href="https://docs.google.com/document/d/1MaI1rgYMNyCZF2eEjBuvnBDoCYHDKlx4k_N5pkDiWu8/edit?usp=sharing" target=_blank>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.fe96fb3036eca951c7eb0789e66bdef1d3d7e75919b9ecf624883f34a0f4272e.js integrity="sha256-/pb7MDbsqVHH6weJ5mve8dPX51kZuez2JIg/NKD0Jy4=" crossorigin=anonymous></script></body></html>