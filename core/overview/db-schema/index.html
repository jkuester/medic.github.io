
<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.71.1" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/beta/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/beta/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/beta/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/beta/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/beta/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/beta/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/beta/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/beta/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/beta/favicons/android-192x192.png" sizes="192x192">

<title>Database schema conventions | Community Health Toolkit</title><meta property="og:title" content="Database schema conventions" />
<meta property="og:description" content="Schema for database objects
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://docs.communityhealthtoolkit.org/beta/core/overview/db-schema/" />
<meta property="article:modified_time" content="2020-06-05T07:14:35+03:00" /><meta property="og:site_name" content="Community Health Toolkit" />
<meta itemprop="name" content="Database schema conventions">
<meta itemprop="description" content="Schema for database objects
">
<meta itemprop="dateModified" content="2020-06-05T07:14:35&#43;03:00" />
<meta itemprop="wordCount" content="1358">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Database schema conventions"/>
<meta name="twitter:description" content="Schema for database objects
"/>





<link rel="preload" href="/beta/scss/main.min.6c9cfbd21677a7e7dbf84cdc0d519aaa8b5ae1e669353f63fd8018abf82a8e2e.css" as="style">
<link href="/beta/scss/main.min.6c9cfbd21677a7e7dbf84cdc0d519aaa8b5ae1e669353f63fd8018abf82a8e2e.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/beta/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Community Health Toolkit</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/beta/" ><span class="active">Documentation</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/beta/offline-search-index.5e9b3ab51c88364ab62ee553dc2f26b634a1974355d6fbb683fe6442ede3ff476c0314e54a567ff0fd62c1703959bdff8781f5b517a3cf48e6c34d17079969f0.json"
  data-offline-search-base-href="/"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            





<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/beta/offline-search-index.5e9b3ab51c88364ab62ee553dc2f26b634a1974355d6fbb683fe6442ede3ff476c0314e54a567ff0fd62c1703959bdff8781f5b517a3cf48e6c34d17079969f0.json"
  data-offline-search-base-href="/"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    
    
    
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">

    <li class="collapse show" id="beta">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betawhy-the-cht" href="/beta/why-the-cht/">Why the CHT?</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CHT Applications</a>
  </li>
  <ul>

    <li class="collapse " id="betaapps">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsconcepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptsaccess" href="/beta/apps/concepts/access/">Access</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptsnavigation" href="/beta/apps/concepts/navigation/">Navigation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptsforms" href="/beta/apps/concepts/forms/">Forms</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptscare-guides" href="/beta/apps/concepts/care-guides/">Care Guides</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptsworkflows" href="/beta/apps/concepts/workflows/">Workflows</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptshierarchy" href="/beta/apps/concepts/hierarchy/">Hierarchies</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptsusers" href="/beta/apps/concepts/users/">Users</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptsinteroperability" href="/beta/apps/concepts/interoperability/">Interoperability</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsconceptsprerequisites" href="/beta/apps/concepts/prerequisites/">Prerequisites</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Features</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeatures">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/contacts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contacts</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeaturescontacts">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/messaging/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Messaging</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeaturesmessaging">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/reports/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reports</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeaturesreports">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/tasks/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tasks</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeaturestasks">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/targets/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Targets</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeaturestargets">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/admin/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">App Management</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeaturesadmin">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/features/integrations/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Integrations</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsfeaturesintegrations">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsfeaturesintegrationsdhis2" href="/beta/apps/features/integrations/dhis2/">DHIS2</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsfeaturesintegrationsopenmrs" href="/beta/apps/features/integrations/openmrs/">OpenMRS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsfeaturesintegrationsrapidpro" href="/beta/apps/features/integrations/rapidpro/">RapidPro</a>
      
      
    </li>

  </ul>


</ul>

      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/examples/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Examples</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsexamples">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsexamplesanc" href="/beta/apps/examples/anc/">ANC Reference App</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsexamplescontact-tracing" href="/beta/apps/examples/contact-tracing/">Contact Tracing</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsexamplesebs" href="/beta/apps/examples/ebs/">Event Based Surveillance</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/tutorials/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>

    <li class="collapse " id="betaappstutorials">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappstutorialslocal-setup" href="/beta/apps/tutorials/local-setup/">Local Setup</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappstutorialscontact-and-users-1" href="/beta/apps/tutorials/contact-and-users-1/">Contacts &#43; Users 1</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappstutorialscontact-and-users-2" href="/beta/apps/tutorials/contact-and-users-2/">Contacts &#43; Users 2</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/guides/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Quick Guides</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsguides">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/guides/database-management/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Database Management</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsguidesdatabase-management">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesdatabase-managementcouch2pg-oom-errors" href="/beta/apps/guides/database-management/couch2pg-oom-errors/">Couch2pg Memory Errors</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesdatabase-managementcouchdb-authentication" href="/beta/apps/guides/database-management/couchdb-authentication/">CouchDB Authentication</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesdatabase-managementdatabase-conflicts" href="/beta/apps/guides/database-management/database-conflicts/">Database Conflicts</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesdatabase-managementrdbms-in-windows" href="/beta/apps/guides/database-management/rdbms-in-windows/">RDBMS in Windows</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/guides/data-management/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Document Management</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsguidesdata-management">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesdata-managementcsv-to-docs" href="/beta/apps/guides/data-management/csv-to-docs/">CSV to Docs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesdata-managementpurging" href="/beta/apps/guides/data-management/purging/">Purging</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/guides/hosting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Hosting</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsguideshosting">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguideshostingec2-setup-guide" href="/beta/apps/guides/hosting/ec2-setup-guide/">EC2 Setup</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguideshostingself-hosting" href="/beta/apps/guides/hosting/self-hosting/">Self Hosting</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguideshostingssh-into-docker" href="/beta/apps/guides/hosting/ssh-into-docker/">SSH into Docker</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguideshostingssl-cert-install" href="/beta/apps/guides/hosting/ssl-cert-install/">SSL Cert Install</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesdhis2-aggregate" href="/beta/apps/guides/dhis2-aggregate/">DHIS2 Aggregate</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/guides/forms/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Forms</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsguidesforms">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesformsadditional-docs" href="/beta/apps/guides/forms/additional-docs/">Additional Docs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesformsapp-form-sms" href="/beta/apps/guides/forms/app-form-sms/">App Form SMS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesformscontact-forms" href="/beta/apps/guides/forms/contact-forms/">Contact Forms</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesformsmultimedia" href="/beta/apps/guides/forms/multimedia/">Multimedia in Forms</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/guides/gateway/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Gateway</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsguidesgateway">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesgatewayconfiguration" href="/beta/apps/guides/gateway/configuration/">Configuration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesgatewayphones" href="/beta/apps/guides/gateway/phones/">Phones</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesgatewaytroubleshooting" href="/beta/apps/guides/gateway/troubleshooting/">Troubleshooting</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesimpact-metrics" href="/beta/apps/guides/impact-metrics/">Impact Metrics</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesinvalid-reports" href="/beta/apps/guides/invalid-reports/">Invalid Reports</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesmoving-contacts" href="/beta/apps/guides/moving-contacts/">Moving Contacts</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesobtaining-logs" href="/beta/apps/guides/obtaining-logs/">Obtaining Logs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesreplicating-production-data-locally" href="/beta/apps/guides/replicating-production-data-locally/">Production Data</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidescollect-forms-update" href="/beta/apps/guides/collect-forms-update/">Remote Collect Update</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesreplication" href="/beta/apps/guides/replication/">Replication</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidesreport-titles" href="/beta/apps/guides/report-titles/">Report Titles</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidessecuring-android" href="/beta/apps/guides/securing-android/">Securing Android</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/guides/sms/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SMS</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsguidessms">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidessmssms-states" href="/beta/apps/guides/sms/sms-states/">SMS States</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidessmsafricas-talking" href="/beta/apps/guides/sms/africas-talking/">Africa&#39;s Talking</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidessmsmessage-loops" href="/beta/apps/guides/sms/message-loops/">Message Loops</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidessmsshortcodes" href="/beta/apps/guides/sms/shortcodes/">Shortcodes</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsguidestelemetry" href="/beta/apps/guides/telemetry/">Telemetry</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsreference">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/reference/forms/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">forms</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsreferenceforms">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceformsapp" href="/beta/apps/reference/forms/app/">app</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceformscollect" href="/beta/apps/reference/forms/collect/">collect</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceformscontact" href="/beta/apps/reference/forms/contact/">contact</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/reference/resources/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">resources</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsreferenceresources">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/reference/translations/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">translations</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsreferencetranslations">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/apps/reference/app-settings/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">app_settings.json</a>
  </li>
  <ul>

    <li class="collapse " id="betaappsreferenceapp-settings">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingshierarchy" href="/beta/apps/reference/app-settings/hierarchy/">.contact_types</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsdhis2" href="/beta/apps/reference/app-settings/dhis2/">.dhisDataSets</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsjson-forms" href="/beta/apps/reference/app-settings/json-forms/">.forms</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsoutbound" href="/beta/apps/reference/app-settings/outbound/">.outbound</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingspatient_reports" href="/beta/apps/reference/app-settings/patient_reports/">.patient_reports</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsuser-permissions" href="/beta/apps/reference/app-settings/user-permissions/">.permissions</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsregistrations" href="/beta/apps/reference/app-settings/registrations/">.registrations</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsreplication" href="/beta/apps/reference/app-settings/replication/">.replications</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsuser-roles" href="/beta/apps/reference/app-settings/user-roles/">.roles</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingsschedules" href="/beta/apps/reference/app-settings/schedules/">.schedules</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingssms" href="/beta/apps/reference/app-settings/sms/">.sms</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferenceapp-settingstransitions" href="/beta/apps/reference/app-settings/transitions/">.transitions</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferencecontact-page" href="/beta/apps/reference/contact-page/">contact-summary.templated.js</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferencetargets" href="/beta/apps/reference/targets/">targets.js</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreferencetasks" href="/beta/apps/reference/tasks/">tasks.js</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betaappsreference_partial_functions" href="/beta/apps/reference/_partial_functions/"></a>
      
      
    </li>

  </ul>


</ul>

      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/core/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">CHT Core Framework</a>
  </li>
  <ul>

    <li class="collapse show" id="betacore">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/core/overview/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Overview</a>
  </li>
  <ul>

    <li class="collapse show" id="betacoreoverview">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreoverviewarchitecture" href="/beta/core/overview/architecture/">Architecture</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-betacoreoverviewdb-schema" href="/beta/core/overview/db-schema/">Database Schema</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreoverviewdata-flows-for-analytics" href="/beta/core/overview/data-flows-for-analytics/">Data Flows</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreoverviewtransitions" href="/beta/core/overview/transitions/">Transitions</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreoverviewtranslations" href="/beta/core/overview/translations/">Translations</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreoverviewsupported-software" href="/beta/core/overview/supported-software/">Supported Versions</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/core/process/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Process</a>
  </li>
  <ul>

    <li class="collapse " id="betacoreprocess">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreprocessworkflow" href="/beta/core/process/workflow/">Workflow</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreprocessreleasing" href="/beta/core/process/releasing/">Releasing</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreprocessupdate-dependencies" href="/beta/core/process/update-dependencies/">Dependencies</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreprocessstyle-guide" href="/beta/core/process/style-guide/">Style Guide for Code</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/core/guides/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Guides</a>
  </li>
  <ul>

    <li class="collapse " id="betacoreguides">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreguidesfixing-e2e-tests" href="/beta/core/guides/fixing-e2e-tests/">E2E Tests</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreguidesusing-git" href="/beta/core/guides/using-git/">Using Git</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreguidesusing-npm" href="/beta/core/guides/using-npm/">Using NPM</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreguidesusers-bulk-load" href="/beta/core/guides/users-bulk-load/">Bulk Load Users</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreguidesusing-windows" href="/beta/core/guides/using-windows/">Windows Development</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreguidesdocker-setup" href="/beta/core/guides/docker-setup/">Docker Setup</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betacoreguidesget-android-logs" href="/beta/core/guides/get-android-logs/">Get Android Logs</a>
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/core/faq/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">FAQ</a>
  </li>
  <ul>

    <li class="collapse " id="betacorefaq">
      
      
      
    </li>

  </ul>


</ul>

      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Design System</a>
  </li>
  <ul>

    <li class="collapse " id="betadesign">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/personas/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Personas</a>
  </li>
  <ul>

    <li class="collapse " id="betadesignpersonas">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonaschw-janet" href="/beta/design/personas/chw-janet/">CHW</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonaschw-supervisor-ann" href="/beta/design/personas/chw-supervisor-ann/">CHW Supervisor</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonasregional-manager-christina" href="/beta/design/personas/regional-manager-christina/">Regional Manager</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonasnurse-mary" href="/beta/design/personas/nurse-mary/">Nurse</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonasdata-manager-paul" href="/beta/design/personas/data-manager-paul/">Data Manager</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonasapp-builder" href="/beta/design/personas/app-builder/">App Builders</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/personas/partners/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Partners</a>
  </li>
  <ul>

    <li class="collapse " id="betadesignpersonaspartners">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonaspartnersimplementers" href="/beta/design/personas/partners/implementers/">Implementers</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonaspartnerslocal-governments" href="/beta/design/personas/partners/local-governments/">Local Gov</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadesignpersonaspartnersnational-governments" href="/beta/design/personas/partners/national-governments/">National Gov</a>
      
      
    </li>

  </ul>


</ul>

      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/apps/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">App Development</a>
  </li>
  <ul>

    <li class="collapse " id="betadesignapps">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/core/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Core Development</a>
  </li>
  <ul>

    <li class="collapse " id="betadesigncore">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/icons/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Icon Library</a>
  </li>
  <ul>

    <li class="collapse " id="betadesignicons">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/icons/forms_tasks_targets/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Forms, Tasks, Targets</a>
  </li>
  <ul>

    <li class="collapse " id="betadesigniconsforms_tasks_targets">
      
      
      
    </li>

  </ul>


</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">

  <li class="td-sidebar-nav__section-title">
    <a  href="/beta/design/icons/people_and_places/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">People and Places</a>
  </li>
  <ul>

    <li class="collapse " id="betadesigniconspeople_and_places">
      
      
      
    </li>

  </ul>


</ul>

      
      
    </li>

  </ul>


</ul>

      
      
    </li>

  </ul>


</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-betadocs-style-guide" href="/beta/docs-style-guide/">Style Guide for Docs</a>
      
      
    </li>


</ul>

    
    
  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/medic/cht-docs/edit/master/content/en/core/overview/db-schema.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/medic/cht-docs/issues/new?title=Database%20schema%20conventions" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/medic/cht-core/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#general-record-data-structure">General record data structure</a></li>
    <li><a href="#contacts-persons-and-places">Contacts (Persons and Places)</a>
      <ul>
        <li><a href="#places">Places</a></li>
        <li><a href="#people">People</a></li>
        <li><a href="#parent-hierachy-representation">Parent hierachy representation</a></li>
      </ul>
    </li>
    <li><a href="#reports">Reports</a></li>
    <li><a href="#forms">Forms</a></li>
    <li><a href="#users">Users</a></li>
    <li><a href="#tasks">Tasks</a></li>
    <li><a href="#targets">Targets</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://docs.communityhealthtoolkit.org/beta/core/">CHT Core Framework</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://docs.communityhealthtoolkit.org/beta/core/overview/">Overview</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://docs.communityhealthtoolkit.org/beta/core/overview/db-schema/">Database Schema</a>
</li>

	</ol>
</nav	>

            

<div class="td-content">
	<h1>Database schema conventions</h1>
    <div class="lead">Schema for database objects</div>
	       
	<p>CouchDB (and PouchDB in the browser) is a JSON-based NoSQL datastore that we use to store our data. While unlike SQL databases there is no enforced schema, code still follows conventions, and this document aims to describe the schema as defined by how our code operates.</p>
<p>In this document &ldquo;record&rdquo; means a JSON object that resides in CouchDB or PouchDB.</p>
<h2 id="general-record-data-structure">General record data structure</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Required by</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_id</code></td>
<td>CouchDB&rsquo;s unique identifier of the record</td>
<td>all records</td>
</tr>
<tr>
<td><code>_rev</code></td>
<td>CouchDB&rsquo;s revision marker</td>
<td>all records</td>
</tr>
<tr>
<td><code>type</code></td>
<td>The general type of the document, see below</td>
<td>all user-created* documents</td>
</tr>
<tr>
<td><code>reported_date</code></td>
<td>Numerical timestamp of when the document is first created</td>
<td>all user-created documents</td>
</tr>
</tbody>
</table>
<ul>
<li>User-created documents here generally means contacts and reports, but may extend further.</li>
</ul>
<h2 id="contacts-persons-and-places">Contacts (Persons and Places)</h2>
<p>Contacts are either places (e.g. clinic), groupings (e.g. family) or people (e.g. a patient or CHW).</p>
<p>The <code>type</code> property of contact records depends on the version of Medic you are running:</p>
<ul>
<li>If you are running 3.7 or later you get to <a href="https://github.com/medic/medic-docs/blob/master/configuration/app-settings.md#configuring-the-contact-hierarchy">configure your contact hierarchy</a>, and the <code>type</code> of contacts is <code>contact</code>, and the configured type is in the <code>contact_type</code> property.</li>
<li>In earlier versions the type depended on hierarchical location of the contact. There are 3 hard coded place types: <code>district_hospital</code>, <code>health_centre</code> and <code>clinic</code> and one people type <code>person</code>. These place names are often meaningless (hence the configurable contact hierarchy in later versions) to the configured project, and are textually (ie in the UI not in data structures) renamed to mean other things. For example, as <code>clinic</code> is the lowest level it is often used to represent a family.</li>
</ul>
<h3 id="places">Places</h3>
<p>Represent either an actual physical location such as a clinic, or a grouping such as a family or region.</p>
<p>Unless a place is at the top of the hierarchy it has a <code>parent</code> place.</p>
<p>Each location has a primary contact, which is a <code>person</code> contact stored in the <code>contact</code> property.</p>
<h3 id="people">People</h3>
<p>People are both patients in the system and users of the system, such as CHWs or Nurses. Users have additional records marking them as users of the system (see <a href="#users">User</a> below).</p>
<p>People always have a <code>parent</code> place.</p>
<h3 id="parent-hierachy-representation">Parent hierachy representation</h3>
<p>Contacts <strong>store</strong> their parent hierarchy as a minified hierarchical structure, which records the <code>_id</code> of each parent up until the top of the hierarchy:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;person&#39;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;A patient&#39;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">parent</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">_id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;clinic-id&#39;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">parent</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">_id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;health_centre-id&#39;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#000">parent</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">_id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;district_hospital-id&#39;</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>Generally when contacts are <strong>used</strong> in the app they are first &ldquo;hydrated&rdquo;, with the rest of the information filled in from their parent&rsquo;s place documents:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;person&#39;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;A patient&#39;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">parent</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">_id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;clinic-id&#39;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;A clinic&#39;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">reported_date</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1234</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">...</span> <span style="color:#8f5902;font-style:italic">// etc
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">parent</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">_id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;health_centre-id&#39;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;A Health Centre&#39;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#000">reported_date</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1134</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#000;font-weight:bold">...</span> <span style="color:#8f5902;font-style:italic">// etc
</span><span style="color:#8f5902;font-style:italic"></span>      <span style="color:#000">parent</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">_id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;district_hospital-id&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;THE District Hospital&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#000">reported_date</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1034</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#000;font-weight:bold">...</span> <span style="color:#8f5902;font-style:italic">// etc
</span><span style="color:#8f5902;font-style:italic"></span>      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h2 id="reports">Reports</h2>
<p>Reports are created by users filling out and submitting forms, as well as sending in SMS.</p>
<p>All reports:</p>
<ul>
<li>Use the <code>data_record</code> type</li>
<li>Have their fields stored in the <code>fields</code> property</li>
<li>Have the report author&rsquo;s phone number (if it exists) stored in the <code>from</code> field</li>
<li>Store the form&rsquo;s identifier in the <code>form</code> field</li>
<li>May have a <code>contact</code> property, which is a minified version of the report author&rsquo;s contact and its hierarchy (see above)</li>
</ul>
<p>Reports can be about people or places.</p>
<p>Reports about people should have one or more of:</p>
<ul>
<li>A patient shortcode, found at <code>doc.patient_id</code> or <code>doc.fields.patient_id</code></li>
<li>A patient record&rsquo;s <code>_id</code>, found at <code>doc.patient_uuid</code> or <code>doc.fields.patient_uuid</code>, as well as potientially in the same locations as the shortcode</li>
</ul>
<p>Reports about places should have a <code>doc.place_id</code>.</p>
<p>Additionally, SMS reports:</p>
<ul>
<li>Have an <code>sms_message</code> property which contains, among other things, the raw SMS</li>
<li>May not have a <code>contact</code> property if the SMS comes from a phone number that does not have an associated contact</li>
</ul>
<p>Additionally, XML reports:</p>
<ul>
<li>Have the XML file that Enketo (the XForm renderer used) generates as an attachment</li>
<li>Have a <code>content_type</code> property of <code>xml</code></li>
</ul>
<h2 id="forms">Forms</h2>
<p>SMS forms are defined in <a href="https://github.com/medic/medic-docs/blob/master/configuration/app-settings.md#patient-reports">application config</a>.</p>
<p>XML forms are stored in the database and have:</p>
<ul>
<li>An <code>_id</code> of <code>form:&lt;formname&gt;</code></li>
<li>The <code>type</code> of <code>form</code></li>
<li>The actual XML Xforms definition attached</li>
</ul>
<p>XML forms are defined as XForm XML files</p>
<h2 id="users">Users</h2>
<p>Users represent credentials and roles / permissions for accessing the application. This can either be:</p>
<ul>
<li>people who can log into the application, such as CHWs or Nurses</li>
<li>or credentials granting external software restricted permissions to perform certain tasks, such as allowing an external service permission to write reports via the api.</li>
</ul>
<p>User records have at least:</p>
<ul>
<li>An <code>_id</code> of <code>org.couchdb.user:&lt;username&gt;</code></li>
<li>A <code>name</code> which is the same as <code>&lt;username&gt;</code> above</li>
<li>A <code>roles</code> array</li>
</ul>
<p>There are two slightly different copies of this record stored.</p>
<p>The record in the <code>_users</code> database includes:</p>
<ul>
<li>The <code>type</code> of <code>user</code></li>
<li>The password hash and associated data</li>
</ul>
<p>The <code>_users</code> database is what CouchDB uses for authentication and is only editable by administrative users, so is authoritive when it comes to roles and the like.</p>
<p>The <code>medic</code> database stores a copy of roles and permissions along with:</p>
<ul>
<li>The <code>type</code> of <code>user-settings</code></li>
<li>They may have a <code>contact_id</code> field that is the <code>_id</code> of the <em>person</em> that the user is attached to</li>
<li>They may also have a <code>facility_id</code> field that is the <code>_id</code> of the <em>place</em> that the user is attached to</li>
<li>They may also have a <code>known</code> field. If this field is <code>true</code>, it means the user has logged in once and will no longer be shown the tour by default. Otherwise, it will be <code>undefined</code>.</li>
</ul>
<p>Note that SMS users do not have a users record: their phone number will be attached to a <code>person</code> record, but they do not have a user because they do not access the application.</p>
<p>Users then, can be represented by up to 3 docs:</p>
<ul>
<li>a <code>person</code> document that represents a physical human being in our hierarchy of places and people</li>
<li>a <code>users</code> document that represents authorisation and authentication information for physical people or authenticated external services</li>
<li>a <code>user-settings</code> document that ties the <code>user</code> and <code>person</code> documents together</li>
</ul>
<h2 id="tasks">Tasks</h2>
<p><a href="https://github.com/medic/medic-docs/blob/master/configuration/developing-community-health-applications.md">Partner configuration code</a> running inside the Core Framework can cause tasks to appear within the Tasks tab. Each task in the tab is powered by a task document. Task documents are:</p>
<ul>
<li>updated only after the data for their emitting contact changes or every 7 days</li>
<li>created in the database for any task due within the last 60 days</li>
<li>immutable once their state is &ldquo;terminal&rdquo; (Cancelled, Completed, Failed)</li>
</ul>
<table>
<thead>
<tr>
<th>State</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Draft</td>
<td>Task has been calculated but it is scheduled in the future</td>
</tr>
<tr>
<td>Ready</td>
<td>Task is currently showing to the user</td>
</tr>
<tr>
<td>Cancelled</td>
<td>Task was not emitted when refreshing the requester&rsquo;s data. Task has invalid partner emission.</td>
</tr>
<tr>
<td>Completed</td>
<td>Task was emitted with { resolved: true }</td>
</tr>
<tr>
<td>Failed</td>
<td>Task was never terminated and the endDate has past</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>user</td>
<td>The user settings id of the user who calculated and created the document. Used for controlling replication. (eg. <code>org.couchdb.user:agatha</code>)</td>
</tr>
<tr>
<td>requester</td>
<td>The guid of the contact whose data brought about the creation of the document. Used for controlling cancellation.</td>
</tr>
<tr>
<td>owner</td>
<td>The guid of the contact whose profile this task will appear on in the contact&rsquo;s tab.</td>
</tr>
<tr>
<td>forId</td>
<td>If completing a task&rsquo;s action opens a form. Completing the form creates a report. <code>forId</code> is the guid of the contact information that will be passed into the form. For most forms, the resulting report will be associated with this contact.</td>
</tr>
<tr>
<td>emission</td>
<td>Minified task data emitted from the partner code.</td>
</tr>
<tr>
<td>stateHistory</td>
<td>Each time the state attribute changes, the time of the change is recorded in the state history.</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;_id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;task~org.couchdb.user:agatha~pregReport~pregnancy-facility-visit-reminder~2~523435132468&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;task&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;authoredOn&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">523435132468</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;user&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;org.couchdb.user:agatha&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;requester&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;requester-contact-guid&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;owner-contact-guid&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;state&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Ready&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;emission&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;_id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pregReport~pregnancy-facility-visit-reminder~2&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;forId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;for-contact-guid&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;dueDate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2000-01-01&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;startDate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1999-12-29&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;endDate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2000-01-08&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#a40000">...</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#204a87;font-weight:bold">&#34;stateHistory&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[{</span>
    <span style="color:#204a87;font-weight:bold">&#34;state&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Ready&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;timestamp&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">523435132468</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000;font-weight:bold">}],</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h2 id="targets">Targets</h2>
<p><a href="https://github.com/medic/medic-docs/blob/master/configuration/developing-community-health-applications.md">Partner configuration code</a> can configure targets to appear within the Targets/Analytics tab. Target documents are:</p>
<ul>
<li>one per analytics reporting period</li>
<li>updated when the user loads the application or when they view the targets tab</li>
<li>updated a maximum of once per day</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;_id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;target~2000-01~user-contact-guid~org.couchdb.user:agatha&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;target&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;user&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;org.couchdb.user:agatha&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;owner&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;user-contact-guid&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;updated_date&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">523435132468</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;targets&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;deaths-this-month&#34;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#a40000">...</span>
      <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;pass&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;total&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">15</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">},</span>
    <span style="color:#a40000">...</span>
  <span style="color:#000;font-weight:bold">]</span>
<span style="color:#000;font-weight:bold">}</span>

</code></pre></div>
	


	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/medic/cht-docs/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/medic/cht-docs/issues/new">tell us how we can improve</a>.
</p>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified 05.06.2020: <a  href="https://github.com/medic/cht-docs/commit/2c52547c884c7cd34dab7ec2dd300caa662c20ee">Reduce Slack Notification Noise (2c52547)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 CHT All Rights Reserved</small>
        <small class="ml-1"><a href="https://docs.google.com/document/d/1MaI1rgYMNyCZF2eEjBuvnBDoCYHDKlx4k_N5pkDiWu8/edit?usp=sharing" target="_blank">Privacy Policy</a></small>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="/beta/js/main.min.7afee248b9b3c1d4438c6841cc272ae0ac1f81a3ee5c0ed939f1d57c18de3f7d.js" integrity="sha256-ev7iSLmzwdRDjGhBzCcq4KwfgaPuXA7ZOfHVfBjeP30=" crossorigin="anonymous"></script>



  </body>
</html>