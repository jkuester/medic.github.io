<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.71.1"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>API to interact with CHT Applications | Community Health Toolkit</title><meta property="og:title" content="API to interact with CHT Applications"><meta property="og:description" content="RESTful Application Programming Interfaces for integrating with CHT applications"><meta property="og:type" content="article"><meta property="og:url" content="https://docs.communityhealthtoolkit.org/apps/reference/api/"><meta property="article:modified_time" content="2022-03-01T10:10:44+01:00"><meta property="og:site_name" content="Community Health Toolkit"><meta itemprop=name content="API to interact with CHT Applications"><meta itemprop=description content="RESTful Application Programming Interfaces for integrating with CHT applications"><meta itemprop=dateModified content="2022-03-01T10:10:44+01:00"><meta itemprop=wordCount content="5416"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="API to interact with CHT Applications"><meta name=twitter:description content="RESTful Application Programming Interfaces for integrating with CHT applications"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-168418637-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=/scss/main.min.b49a62ff85f2711d9a7ea2511925db921a52b0a75270b09a9a4021dc2217b498.css as=style><link href=/scss/main.min.b49a62ff85f2711d9a7ea2511925db921a52b0a75270b09a9a4021dc2217b498.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Community Health Toolkit</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/apps/reference/><span>Reference</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class=td-sidebar-nav__section><a class="td-sidebar-link td-sidebar-link__page" id=m-why-the-cht href=/why-the-cht/>Why the CHT?</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section">CHT Applications&nbsp;&nbsp;<i class="fas fa-caret-down"></i></a></li><ul><li class="collapse show" id=apps><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/concepts/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Concepts&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsaccess href=/apps/concepts/access/>Access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsnavigation href=/apps/concepts/navigation/>Navigation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsforms href=/apps/concepts/forms/>Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptscare-guides href=/apps/concepts/care-guides/>Care Guides</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsworkflows href=/apps/concepts/workflows/>Workflows</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptshierarchy href=/apps/concepts/hierarchy/>Hierarchies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsusers href=/apps/concepts/users/>Users</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsinteroperability href=/apps/concepts/interoperability/>Interoperability</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsprerequisites href=/apps/concepts/prerequisites/>Prerequisites</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Features&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeatures><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/contacts/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Contacts&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturescontacts></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/messaging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Messaging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesmessaging></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/reports/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Reports&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesreports></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/supervision/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Supervision&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturessupervision></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/tasks/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tasks&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturestasks></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/targets/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Targets&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturestargets></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/uhc-mode/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">UHC Mode&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesuhc-mode></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/admin/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">App Management&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesadmin></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/integrations/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Integrations&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesintegrations><a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsandroid href=/apps/features/integrations/android/>Android</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationscustom href=/apps/features/integrations/custom/>Custom</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsdhis2 href=/apps/features/integrations/dhis2/>DHIS2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsopenmrs href=/apps/features/integrations/openmrs/>OpenMRS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsoppia href=/apps/features/integrations/oppia/>OppiaMobile</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsrapidpro href=/apps/features/integrations/rapidpro/>RapidPro</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/examples/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Examples&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsexamples><a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesanc href=/apps/examples/anc/>Maternal & Newborn Health</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescontact-tracing href=/apps/examples/contact-tracing/>Contact Tracing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesphc-covid href=/apps/examples/phc-covid/>COVID-19 Adaptations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescovid-education href=/apps/examples/covid-education/>COVID-19 Education</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescovid-rdt-reference-app href=/apps/examples/covid-rdt-reference-app/>COVID-19 Testing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesebs href=/apps/examples/ebs/>Event Based Surveillance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexampleslearning-care href=/apps/examples/learning-care/>Learning & Care</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplestraining href=/apps/examples/training/>Remote Training</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/tutorials/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tutorials&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appstutorials><a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialslocal-setup href=/apps/tutorials/local-setup/>Local Setup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-and-users-1 href=/apps/tutorials/contact-and-users-1/>Contacts + Users 1</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-and-users-2 href=/apps/tutorials/contact-and-users-2/>Contacts + Users 2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapplication-settings href=/apps/tutorials/application-settings/>Application Settings</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialssms-forms href=/apps/tutorials/sms-forms/>SMS Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialssms-schedules href=/apps/tutorials/sms-schedules/>SMS Schedules</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapp-forms href=/apps/tutorials/app-forms/>App Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsform-properties href=/apps/tutorials/form-properties/>Form Properties</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstasks-1 href=/apps/tutorials/tasks-1/>Tasks</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstargets href=/apps/tutorials/targets/>Targets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-summary href=/apps/tutorials/contact-summary/>Contact Summary</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsdeath-reporting href=/apps/tutorials/death-reporting/>Death Report Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscondition-cards href=/apps/tutorials/condition-cards/>Condition Cards</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialslocalizing-cht href=/apps/tutorials/localizing-cht/>Localization</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapplication-graphics href=/apps/tutorials/application-graphics/>Branding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstasks-2 href=/apps/tutorials/tasks-2/>Complex Tasks</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Quick Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguides><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/onboarding/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Using a Training App&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesonboarding></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/data/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Data&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdata><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatahydration href=/apps/guides/data/hydration/>Document hydration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatausers-bulk-load href=/apps/guides/data/users-bulk-load/>Bulk Load Users</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatafixing-data-in-wrong-location href=/apps/guides/data/fixing-data-in-wrong-location/>Detecting and fixing data on the wrong server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdataimpact-metrics href=/apps/guides/data/impact-metrics/>CHT Impact Metrics</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatacsv-to-docs href=/apps/guides/data/csv-to-docs/>CSV to Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatainvalid-reports href=/apps/guides/data/invalid-reports/>Invalid Reports</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/database/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Database&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdatabase><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasemuting_in_dashboards href=/apps/guides/database/muting_in_dashboards/>Contact Muting in SQL queries</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasecouch2pg-oom-errors href=/apps/guides/database/couch2pg-oom-errors/>Couch2pg Memory Errors</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasecouchdb-authentication href=/apps/guides/database/couchdb-authentication/>CouchDB Authentication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasedatabase-conflicts href=/apps/guides/database/database-conflicts/>Database Conflicts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabaserdbms-from-mac href=/apps/guides/database/rdbms-from-mac/>RDBMS from MacOS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabaserdbms-from-windows href=/apps/guides/database/rdbms-from-windows/>RDBMS from Windows</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/debugging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Debugging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdebugging><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingobtaining-logs href=/apps/guides/debugging/obtaining-logs/>Obtaining Logs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingreplicating-production-data-locally href=/apps/guides/debugging/replicating-production-data-locally/>Production Data</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingsecure-sharing-of-developer-instance href=/apps/guides/debugging/secure-sharing-of-developer-instance/>Securely Sharing Your Development Environment</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/forms/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Forms&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesforms><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsuhc-mode href=/apps/guides/forms/uhc-mode/>UHC Mode</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsadditional-docs href=/apps/guides/forms/additional-docs/>Additional Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsapp-form-sms href=/apps/guides/forms/app-form-sms/>App Form SMS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformscontact-forms href=/apps/guides/forms/contact-forms/>Contact Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsgoogle-drive href=/apps/guides/forms/google-drive/>Fetching forms from Google Drive</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsmultimedia href=/apps/guides/forms/multimedia/>Multimedia in Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformswealth-quintiles href=/apps/guides/forms/wealth-quintiles/>Quintiles</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsreport-titles href=/apps/guides/forms/report-titles/>Report Titles</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/hosting/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Hosting&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguideshosting><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingrequirements href=/apps/guides/hosting/requirements/>Requirements</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingec2-setup-guide href=/apps/guides/hosting/ec2-setup-guide/>AWS Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingself-hosting href=/apps/guides/hosting/self-hosting/>Self Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingapp-developer href=/apps/guides/hosting/app-developer/>App Developer Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingssl-cert-install href=/apps/guides/hosting/ssl-cert-install/>SSL Cert Install</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingoffline href=/apps/guides/hosting/offline/>Offline Hosting</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/integrations/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Integrations&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesintegrations><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/integrations/best-practices/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Best Practices&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesintegrationsbest-practices><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsbest-practicesrapidpro href=/apps/guides/integrations/best-practices/rapidpro/>RapidPro</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsdhis2-aggregate href=/apps/guides/integrations/dhis2-aggregate/>DHIS2 Aggregate</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsopenmrs href=/apps/guides/integrations/openmrs/>OpenMRS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsoppia href=/apps/guides/integrations/oppia/>OppiaMobile</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsrapidpro href=/apps/guides/integrations/rapidpro/>RapidPro</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Messaging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaging><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/gateways/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Gateways&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaginggateways><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/gateways/gateway/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">CHT Gateway&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaginggatewaysgateway><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewayconfiguration href=/apps/guides/messaging/gateways/gateway/configuration/>Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewayphones href=/apps/guides/messaging/gateways/gateway/phones/>Phones</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewaytroubleshooting href=/apps/guides/messaging/gateways/gateway/troubleshooting/>Troubleshooting</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysafricas-talking href=/apps/guides/messaging/gateways/africas-talking/>Africa's Talking</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysrapidpro href=/apps/guides/messaging/gateways/rapidpro/>RapidPro</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingsms-states href=/apps/guides/messaging/sms-states/>SMS States</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingshortcodes href=/apps/guides/messaging/shortcodes/>Contact IDs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingmessage-loops href=/apps/guides/messaging/message-loops/>Message Loops</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/performance/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Performance&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesperformance><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancepurging href=/apps/guides/performance/purging/>Purging</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancereplication href=/apps/guides/performance/replication/>Replication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancetelemetry href=/apps/guides/performance/telemetry/>Telemetry</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/privacy/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Privacy&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesprivacy><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesprivacyprivacy-policy href=/apps/guides/privacy/privacy-policy/>Adding Policies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesprivacypolicy href=/apps/guides/privacy/policy/>Medic’s Policy</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/security/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Security&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidessecurity><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidessecuritysecuring-android href=/apps/guides/security/securing-android/>Securing Android</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/tasks/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tasks&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidestasks><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestaskspass-data-to-form href=/apps/guides/tasks/pass-data-to-form/>Passing Data from Tasks to Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestasksquery-task-data href=/apps/guides/tasks/query-task-data/>Querying Task Documents</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestaskstask-schema-parameters href=/apps/guides/tasks/task-schema-parameters/>Task Schema Parameters</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/updates/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Updates&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesupdates><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesupdatesmoving-contacts href=/apps/guides/updates/moving-contacts/>Moving Contacts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesupdatescollect-forms-update href=/apps/guides/updates/collect-forms-update/>Remote Collect Update</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section">Reference&nbsp;&nbsp;<i class="fas fa-caret-down"></i></a></li><ul><li class="collapse show" id=appsreference><a class="td-sidebar-link td-sidebar-link__page active" id=m-appsreferenceapi href=/apps/reference/api/>API</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/forms/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">forms/&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreferenceforms><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformsapp href=/apps/reference/forms/app/>app</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformscollect href=/apps/reference/forms/collect/>collect</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformscontact href=/apps/reference/forms/contact/>contact</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceresources href=/apps/reference/resources/>resources/</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetranslations href=/apps/reference/translations/>translations/</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/app-settings/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">app_settings.json&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreferenceapp-settings><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsaccept_case_reports href=/apps/reference/app-settings/accept_case_reports/>.accept_case_reports</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingshierarchy href=/apps/reference/app-settings/hierarchy/>.contact_types</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsdhis2 href=/apps/reference/app-settings/dhis2/>.dhis_data_sets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsforms href=/apps/reference/app-settings/forms/>.forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsheader_tabs href=/apps/reference/app-settings/header_tabs/>.header_tabs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsoutbound href=/apps/reference/app-settings/outbound/>.outbound</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingspatient_reports href=/apps/reference/app-settings/patient_reports/>.patient_reports</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsuser-permissions href=/apps/reference/app-settings/user-permissions/>.permissions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsregistrations href=/apps/reference/app-settings/registrations/>.registrations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreminders href=/apps/reference/app-settings/reminders/>.reminders</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreplication_depth href=/apps/reference/app-settings/replication_depth/>.replication_depth</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreplications href=/apps/reference/app-settings/replications/>.replications</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsuser-roles href=/apps/reference/app-settings/user-roles/>.roles</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsschedules href=/apps/reference/app-settings/schedules/>.schedules</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingssms href=/apps/reference/app-settings/sms/>.sms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingstoken_login href=/apps/reference/app-settings/token_login/>.token_login</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingstransitions href=/apps/reference/app-settings/transitions/>.transitions</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencecontact-page href=/apps/reference/contact-page/>contact-summary.templated.js</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetargets href=/apps/reference/targets/>targets.js</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetasks href=/apps/reference/tasks/>tasks.js</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">CHT Core Framework&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=core><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/overview/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Overview&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreoverview><a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewarchitecture href=/core/overview/architecture/>Architecture</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewroadmap href=/core/overview/roadmap/>Roadmap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewdb-schema href=/core/overview/db-schema/>Database Schema</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewoffline-first href=/core/overview/offline-first/>Offline-First</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewpwa href=/core/overview/pwa/>Progressive Web App</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewdata-flows-for-analytics href=/core/overview/data-flows-for-analytics/>Data Flows</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewtransitions href=/core/overview/transitions/>Sentinel Transitions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewtranslations href=/core/overview/translations/>Translations</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/releases/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Releases&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=corereleases><a class="td-sidebar-link td-sidebar-link__page" id=m-corereleasesfeature_releases href=/core/releases/feature_releases/>Feature Releases</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreguides><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesreleasing href=/core/guides/releasing/>Releasing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesupdate-dependencies href=/core/guides/update-dependencies/>Dependencies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesfixing-e2e-tests href=/core/guides/fixing-e2e-tests/>E2E Tests</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/guides/android/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Android&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreguidesandroid><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroiddevelopment-setup href=/core/guides/android/development-setup/>Development Environment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidreleasing href=/core/guides/android/releasing/>Releasing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidpublishing href=/core/guides/android/publishing/>Publishing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidbranding href=/core/guides/android/branding/>CHT Android Flavors</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesusing-npm href=/core/guides/using-npm/>Using NPM</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesusing-windows href=/core/guides/using-windows/>Windows Development</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesdocker-setup href=/core/guides/docker-setup/>Docker Use</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Design System&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=design><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/personas/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Personas&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designpersonas><a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaschw-janet href=/design/personas/chw-janet/>CHW</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaschw-supervisor-ann href=/design/personas/chw-supervisor-ann/>CHW Supervisor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasregional-manager-christina href=/design/personas/regional-manager-christina/>Regional Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasnurse-mary href=/design/personas/nurse-mary/>Nurse</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasdata-manager-paul href=/design/personas/data-manager-paul/>Data Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasapp-builder href=/design/personas/app-builder/>App Builders</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/personas/partners/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Partners&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designpersonaspartners><a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnersimplementers href=/design/personas/partners/implementers/>Implementers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnerslocal-governments href=/design/personas/partners/local-governments/>Local Gov</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnersnational-governments href=/design/personas/partners/national-governments/>National Gov</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/best-practices/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Best Practices&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designbest-practices></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/components/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Component Library&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designcomponents></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Icon Library&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designicons><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/forms_tasks_targets/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Forms, Tasks, Targets&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designiconsforms_tasks_targets></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/people_and_places/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">People and Places&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designiconspeople_and_places></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Quick Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designguides><a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesdesigning-interviews href=/design/guides/designing-interviews/>User Interviews</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesempathy-map href=/design/guides/empathy-map/>Empathy Map</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesproblem-statement href=/design/guides/problem-statement/>Problem Statement</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesmapping-hierarchy href=/design/guides/mapping-hierarchy/>Mapping Hierarchy</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/mockups/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Mockups&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designmockups></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Contributing&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contribute><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/code/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Code&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contributecode><a class="td-sidebar-link td-sidebar-link__page" id=m-contributecodeworkflow href=/contribute/code/workflow/>Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributecodestyle-guide href=/contribute/code/style-guide/>Style Guide</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/docs/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Documentation&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contributedocs><a class="td-sidebar-link td-sidebar-link__page" id=m-contributedocsworkflow href=/contribute/docs/workflow/>Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributedocsstyle-guide href=/contribute/docs/style-guide/>Style Guide</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-contributecode-of-conduct href=/contribute/code-of-conduct/>Code of Conduct</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-glossary href=/glossary/>Glossary</a></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/medic/cht-docs/edit/main/content/en/apps/reference/api.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/medic/cht-docs/issues/new?title=Improve+%27API%20to%20interact%20with%20CHT%20Applications%27&labels=enhancement&body=Page:+/apps/reference/api/%0aVersion:+2022-03-01%2010:10:44%20+0100%20+0100%0a---" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/medic/cht-core/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#settings>Settings</a><ul><li><a href=#get-apiv1settings>GET /api/v1/settings</a></li><li><a href=#put-apiv1settings>PUT /api/v1/settings</a></li></ul></li><li><a href=#export>Export</a><ul><li><a href=#get-apiv2exportdhis>GET /api/v2/export/dhis</a></li><li><a href=#get-apiv2exportreports>GET /api/v2/export/reports</a></li><li><a href=#get-apiv2exportmessages>GET /api/v2/export/messages</a></li><li><a href=#get-apiv2exportfeedback>GET /api/v2/export/feedback</a></li><li><a href=#get-apiv2exportcontacts>GET /api/v2/export/contacts</a></li></ul></li><li><a href=#forms>Forms</a><ul><li><a href=#get-apiv1forms>GET /api/v1/forms</a></li><li><a href=#get-apiv1formsidformat>GET /api/v1/forms/{{id}}.{{format}}</a></li><li><a href=#post-apiv1formsvalidate>POST /api/v1/forms/validate</a></li></ul></li><li><a href=#records>Records</a><ul><li><a href=#post-apiv2records>POST /api/v2/records</a></li></ul></li><li><a href=#sms>SMS</a><ul><li><a href=#post-apisms>POST /api/sms</a></li></ul></li><li><a href=#people>People</a><ul><li><a href=#supported-properties>Supported Properties</a></li><li><a href=#post-apiv1people>POST /api/v1/people</a></li></ul></li><li><a href=#places>Places</a><ul><li><a href=#supported-properties-1>Supported Properties</a></li><li><a href=#post-apiv1places>POST /api/v1/places</a></li><li><a href=#post-apiv1placesid>POST /api/v1/places/{{id}}</a></li></ul></li><li><a href=#users>Users</a><ul><li><a href=#supported-properties-2>Supported Properties</a></li><li><a href=#get-apiv1users>GET /api/v1/users</a></li><li><a href=#post-apiv1users>POST /api/v1/users</a></li><li><a href=#post-apiv1usersusername>POST /api/v1/users/{{username}}</a></li><li><a href=#delete-apiv1usersusername>DELETE /api/v1/users/{{username}}</a></li><li><a href=#get-apiv1users-info>GET /api/v1/users-info</a></li></ul></li><li><a href=#bulk-operations>Bulk Operations</a><ul><li><a href=#post-apiv1bulk-delete>POST /api/v1/bulk-delete</a></li></ul></li><li><a href=#monitoring>Monitoring</a><ul><li><a href=#get-apiv1monitoring>GET /api/v1/monitoring</a></li><li><a href=#get-apiv2monitoring>GET /api/v2/monitoring</a></li></ul></li><li><a href=#upgrades>Upgrades</a><ul><li><a href=#post-apiv1upgrade>POST /api/v1/upgrade</a></li><li><a href=#post-apiv1upgradestage>POST /api/v1/upgrade/stage</a></li><li><a href=#post-apiv1upgradecomplete>POST /api/v1/upgrade/complete</a></li></ul></li><li><a href=#hydrate>Hydrate</a><ul><li><a href=#get-apiv1hydrate>GET api/v1/hydrate</a></li><li><a href=#post-apiv1hydrate>POST api/v1/hydrate</a></li></ul></li><li><a href=#contacts-by-phone>Contacts by phone</a><ul><li><a href=#get-apiv1contacts-by-phone>GET api/v1/contacts-by-phone</a></li><li><a href=#post-apiv1contacts-by-phone>POST api/v1/contacts-by-phone</a></li></ul></li><li><a href=#replication-limit>Replication Limit</a><ul><li><a href=#get-apiv1users-doc-count>GET /api/v1/users-doc-count</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://docs.communityhealthtoolkit.org/apps/>CHT Applications</a></li><li class=breadcrumb-item><a href=https://docs.communityhealthtoolkit.org/apps/reference/>Reference</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://docs.communityhealthtoolkit.org/apps/reference/api/>API</a></li></ol></nav><div class=td-content><h1>API to interact with CHT Applications</h1><div class=lead>RESTful Application Programming Interfaces for integrating with CHT applications</div><div class="pageinfo pageinfo-primary"><p>This page covers the endpoints to use when integrating with the CHT server. If there isn&rsquo;t an endpoint that provides the function or data you need, direct access to the database is possible via the <a href=https://docs.couchdb.org/en/stable/api/index.html>CouchDB API</a>. Access to the <a href=https://docs.communityhealthtoolkit.org/core/overview/data-flows-for-analytics/>PostgreSQL database</a> may also prove useful for data analysis. If additional endpoints would be helpful, please make suggestions via a <a href=https://github.com/medic/cht-core/issues/new/choose>GitHub issue</a>.</p></div><nav id=TableOfContents><ul><li><a href=#settings>Settings</a><ul><li><a href=#get-apiv1settings>GET /api/v1/settings</a></li><li><a href=#put-apiv1settings>PUT /api/v1/settings</a></li></ul></li><li><a href=#export>Export</a><ul><li><a href=#get-apiv2exportdhis>GET /api/v2/export/dhis</a></li><li><a href=#get-apiv2exportreports>GET /api/v2/export/reports</a></li><li><a href=#get-apiv2exportmessages>GET /api/v2/export/messages</a></li><li><a href=#get-apiv2exportfeedback>GET /api/v2/export/feedback</a></li><li><a href=#get-apiv2exportcontacts>GET /api/v2/export/contacts</a></li></ul></li><li><a href=#forms>Forms</a><ul><li><a href=#get-apiv1forms>GET /api/v1/forms</a></li><li><a href=#get-apiv1formsidformat>GET /api/v1/forms/{{id}}.{{format}}</a></li><li><a href=#post-apiv1formsvalidate>POST /api/v1/forms/validate</a></li></ul></li><li><a href=#records>Records</a><ul><li><a href=#post-apiv2records>POST /api/v2/records</a></li></ul></li><li><a href=#sms>SMS</a><ul><li><a href=#post-apisms>POST /api/sms</a></li></ul></li><li><a href=#people>People</a><ul><li><a href=#supported-properties>Supported Properties</a></li><li><a href=#post-apiv1people>POST /api/v1/people</a></li></ul></li><li><a href=#places>Places</a><ul><li><a href=#supported-properties-1>Supported Properties</a></li><li><a href=#post-apiv1places>POST /api/v1/places</a></li><li><a href=#post-apiv1placesid>POST /api/v1/places/{{id}}</a></li></ul></li><li><a href=#users>Users</a><ul><li><a href=#supported-properties-2>Supported Properties</a></li><li><a href=#get-apiv1users>GET /api/v1/users</a></li><li><a href=#post-apiv1users>POST /api/v1/users</a></li><li><a href=#post-apiv1usersusername>POST /api/v1/users/{{username}}</a></li><li><a href=#delete-apiv1usersusername>DELETE /api/v1/users/{{username}}</a></li><li><a href=#get-apiv1users-info>GET /api/v1/users-info</a></li></ul></li><li><a href=#bulk-operations>Bulk Operations</a><ul><li><a href=#post-apiv1bulk-delete>POST /api/v1/bulk-delete</a></li></ul></li><li><a href=#monitoring>Monitoring</a><ul><li><a href=#get-apiv1monitoring>GET /api/v1/monitoring</a></li><li><a href=#get-apiv2monitoring>GET /api/v2/monitoring</a></li></ul></li><li><a href=#upgrades>Upgrades</a><ul><li><a href=#post-apiv1upgrade>POST /api/v1/upgrade</a></li><li><a href=#post-apiv1upgradestage>POST /api/v1/upgrade/stage</a></li><li><a href=#post-apiv1upgradecomplete>POST /api/v1/upgrade/complete</a></li></ul></li><li><a href=#hydrate>Hydrate</a><ul><li><a href=#get-apiv1hydrate>GET api/v1/hydrate</a></li><li><a href=#post-apiv1hydrate>POST api/v1/hydrate</a></li></ul></li><li><a href=#contacts-by-phone>Contacts by phone</a><ul><li><a href=#get-apiv1contacts-by-phone>GET api/v1/contacts-by-phone</a></li><li><a href=#post-apiv1contacts-by-phone>POST api/v1/contacts-by-phone</a></li></ul></li><li><a href=#replication-limit>Replication Limit</a><ul><li><a href=#get-apiv1users-doc-count>GET /api/v1/users-doc-count</a></li></ul></li></ul></nav><div class="alert alert-primary" role=alert><h4 class=alert-heading>Note</h4><p>Various properties throughout this API use a timestamp value, the
following formats are supported:</p><ul><li><p>ISO 8601 combined date and time with timezone of the format below where &ldquo;Z&rdquo;
is offset from UTC like &ldquo;-03&rdquo;, &ldquo;+1245&rdquo;, or just &ldquo;Z&rdquo; which is UTC (0 offset);</p><pre><code> YYYY-MM-DDTHH:mm:ssZ
 YYYY-MM-DDTHH:mm:ss.SSSZ
</code></pre></li><li><p>Milliseconds since Unix Epoch</p></li></ul><p>A compatible value can be generated using the <code>toISOString</code> or <code>toValue</code> method
on a Javascript Date object.</p><h5 id=examples>Examples</h5><ul><li>2011-10-10T14:48:00-0300</li><li>2016-07-01T13:48:24+00:00</li><li>2016-07-01T13:48:24Z</li><li>1467383343484 (MS since Epoch)</li></ul></div><h2 id=settings>Settings</h2><p>Get and update the app settings.</p><h3 id=get-apiv1settings>GET /api/v1/settings</h3><p>Returns the settings in JSON format.</p><h3 id=put-apiv1settings>PUT /api/v1/settings</h3><h4 id=query-parameters>Query Parameters</h4><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td>overwrite</td><td>Whether to replace settings document with input document. If both replace and overwite are set, then it overwites only. Defaults to replace.</td></tr><tr><td>replace</td><td>Whether to replace existing settings for the given properties or to merge. Defaults to false (merging).</td></tr></tbody></table><p>Returns a JSON object with two fields:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;success&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;upgraded&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><table><thead><tr><th>Variable</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>success</td><td>Boolean</td><td>Always <code>true</code></td></tr><tr><td>upgraded</td><td>Boolean</td><td>Whether the settings doc was updated or not</td></tr></tbody></table><h2 id=export>Export</h2><p>Request different types of data in various formats.</p><p>Each of the export endpoints except contacts and feedback supports a parameter which returns date formatted in human readable form (ISO 8601). Setting this parameter to false or leaving it out will return dates formatted as an epoch timestamp.</p><p>To set this parameter for a GET request use:</p><pre><code>http://admin:pass@localhost:5988/api/v2/export/messages?options[humanReadable]=true
</code></pre><p>To set this parameter for a POST request submit this as the request body:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;options&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;humanReadable&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h3 id=get-apiv2exportdhis>GET /api/v2/export/dhis</h3><p>Exports target data formatted as a DHIS2 dataValueSet. The data can be filtered to a specific section of the contact hierarchy or for a given time interval.</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>dataSet</td><td>A DHIS2 dataSet ID. Targets associated with this dataSet will have their data aggregated. (required)</td></tr><tr><td>date.from</td><td>Filter the target data to be aggregated to be within the month of this timestamp. (required)</td></tr><tr><td>orgUnit</td><td>Filter the target data to only that associated with contacts with attribute <code>{ dhis: { orgUnit } }</code>. (optional)</td></tr></tbody></table><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;filters&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;dataSet&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;VMuFODsyWaO&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;date&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;from&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>949392000000</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#204a87;font-weight:700>&#34;orgUnit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;KbY9DJ8mBkx&#34;</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h3 id=get-apiv2exportreports>GET /api/v2/export/reports</h3><p>It uses the <a href=https://github.com/medic/cht-core/tree/master/shared-libs/search>search shared library</a> to ensure identical results in the export and the front-end. It also only supports exporting CSV so we can efficiently stream infinitely large exports.</p><h4 id=query-parameters-1>Query parameters</h4><p>These are identical to the JS objects passed to the shared library, as if you were using it directly in Javascript.</p><p>You may either pass JSON in the request body using <code>POST</code>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#a40000>POST</span> <span style=color:#a40000>/api/v</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#a40000>/export/reports</span>
<span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;filters&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;forms&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#204a87;font-weight:700>&#34;selected&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
        <span style=color:#000;font-weight:700>{</span>
          <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;immunization_visit&#34;</span>
        <span style=color:#000;font-weight:700>}</span>
      <span style=color:#000;font-weight:700>]</span>
    <span style=color:#000;font-weight:700>}</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>Or using form-style parameters as <code>GET</code>:</p><pre><code>GET /api/v2/export/reports?filters[search]=&amp;filters[forms][selected][0][code]=immunization_visit
</code></pre><p><strong>NB:</strong> this API is bound directly to this library. For more information on what queries you can perform with the search library, see <a href=https://github.com/medic/cht-core/tree/master/shared-libs/search>its documentation</a>.</p><h3 id=get-apiv2exportmessages>GET /api/v2/export/messages</h3><p>Download messages.</p><h4 id=output>Output</h4><table><thead><tr><th>Column</th><th>Description</th></tr></thead><tbody><tr><td>Record UUID</td><td>The unique ID for the message in the database.</td></tr><tr><td>Patient ID</td><td>The generated short patient ID for use in SMS.</td></tr><tr><td>Reported Date</td><td>The date the message was received or generated.</td></tr><tr><td>From</td><td>This phone number the message is or will be sent from.</td></tr><tr><td>Contact Name</td><td>The name of the user this message is assigned to.</td></tr><tr><td>Message Type</td><td>The type of the message</td></tr><tr><td>Message State</td><td>The state of the message at the time this export was generated</td></tr><tr><td>Received Timestamp</td><td>The datetime the message was received. Only applies to incoming messages.</td></tr><tr><td>Other Timestamps</td><td>The datetime the message transitioned to each state.</td></tr><tr><td>Sent By</td><td>The phone number the message was sent from. Only applies to incoming messages.</td></tr><tr><td>To Phone</td><td>The phone number the message is or will be sent to. Only applies to outgoing messages.</td></tr><tr><td>Message Body</td><td>The content of the message.</td></tr></tbody></table><h4 id=examples>Examples</h4><pre><code>/api/v2/export/messages
</code></pre><h3 id=get-apiv2exportfeedback>GET /api/v2/export/feedback</h3><p>Export a file containing the user feedback.</p><h4 id=query-parameters-2>Query Parameters</h4><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td>format</td><td>The format of the returned file, either &lsquo;csv&rsquo; or &lsquo;xml&rsquo;. Defaults to &lsquo;csv&rsquo;.</td></tr><tr><td>locale</td><td>Locale for translatable data. Defaults to &lsquo;en&rsquo;.</td></tr><tr><td>tz</td><td>The timezone to show date values in, as an offset in minutes from GMT, for example &lsquo;-120&rsquo;.</td></tr><tr><td>skip_header_row</td><td>&lsquo;true&rsquo; to omit the column headings. Defaults to &lsquo;false&rsquo;.</td></tr></tbody></table><h3 id=get-apiv2exportcontacts>GET /api/v2/export/contacts</h3><p>Returns a JSON array of contacts.</p><h4 id=query-parameters-3>Query parameters</h4><p>These are identical to the JS objects passed to the shared library, as if you were using it directly in Javascript.</p><p>You may either pass JSON in the request body using <code>POST</code>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#a40000>POST</span> <span style=color:#a40000>/api/v</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#a40000>/export/contacts</span>
<span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;filters&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;search&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;jim&#34;</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>Or using form-style parameters as <code>GET</code>:</p><pre><code>GET /api/v2/export/contacts?filters[search]=jim
</code></pre><h2 id=forms>Forms</h2><h3 id=get-apiv1forms>GET /api/v1/forms</h3><p>Returns a list of currently installed forms (in all available formats) in JSON format.</p><h4 id=headers>Headers</h4><table><thead><tr><th>Key</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>X-OpenRosa-Version</td><td>1.0</td><td>If this header is specified returns XML formatted forms list. See <a href=https://bitbucket.org/javarosa/javarosa/wiki/FormListAPI>OpenRosa FormListAPI</a>.</td></tr></tbody></table><h4 id=examples-1>Examples</h4><p>Get list of forms currently installed.</p><pre><code>GET /api/v1/forms
</code></pre><pre><code>HTTP/1.1 200
Content-Type: application/json; charset=utf-8

[&quot;anc_visit.xml&quot;,&quot;anc_registration.xml&quot;,&quot;off.xml&quot;, &quot;off.json&quot;]
</code></pre><p>Get OpenRosa XForms compatible forms installed in XML format.</p><pre><code>GET /api/v1/forms
Host: medic.local
X-OpenRosa-Version: 1.0
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
X-OpenRosa-Version: 1.0

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xforms xmlns=&quot;http://openrosa.org/xforms/xformsList&quot;&gt;
  &lt;xform&gt;
    &lt;name&gt;Visit&lt;/name&gt;
    &lt;formID&gt;ANCVisit&lt;/formID&gt;
    &lt;hash&gt;md5:1f0f096602ed794a264ab67224608cf4&lt;/hash&gt;
    &lt;downloadUrl&gt;http://medic.local/api/v1/forms/anc_visit.xml&lt;/downloadUrl&gt;
  &lt;/xform&gt;
  &lt;xform&gt;
    &lt;name&gt;Registration with LMP&lt;/name&gt;
    &lt;formID&gt;PregnancyRegistration&lt;/formID&gt;
    &lt;hash&gt;md5:1f0f096602ed794a264ab67224608cf4&lt;/hash&gt;
    &lt;downloadUrl&gt;http://medic.local/api/v1/forms/anc_registration.xml&lt;/downloadUrl&gt;
  &lt;/xform&gt;
  &lt;xform&gt;
    &lt;name&gt;Stop&lt;/name&gt;
    &lt;formID&gt;Stop&lt;/formID&gt;
    &lt;hash&gt;md5:1f0f096602ed794a264ab67224608cf4&lt;/hash&gt;
    &lt;downloadUrl&gt;http://medic.local/api/v1/forms/off.xml&lt;/downloadUrl&gt;
  &lt;/xform&gt;
&lt;/xforms&gt;
</code></pre><h3 id=get-apiv1formsidformat>GET /api/v1/forms/{{id}}.{{format}}</h3><p>Return form definition for a given form ID and format.</p><h4 id=parameters>Parameters</h4><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>Form identifier</td></tr><tr><td>format</td><td>Format string or file extension. e.g. xml, json</td></tr></tbody></table><h4 id=examples-2>Examples</h4><p>Get latest version of the PregnancyRegistration form in xml (XForms) format.</p><pre><code>GET /api/v1/forms/pregnancyregistration.xml
</code></pre><p>Get the latest version of the NPYY form in JSON format.</p><pre><code>GET /api/v1/forms/NPYY.json
</code></pre><h3 id=post-apiv1formsvalidate>POST /api/v1/forms/validate</h3><p><em>Added in 3.12.0</em>
Validate the XForm passed. Require the <code>can_configure</code> permission.</p><h4 id=headers-1>Headers</h4><table><thead><tr><th>Key</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Content-Type</td><td>application/xml</td><td>The form is sent in XML format</td></tr><tr><td>Authorization</td><td>Basic KEY</td><td>KEY is the &ldquo;basic&rdquo; token</td></tr></tbody></table><h4 id=examples-3>Examples</h4><pre><code>POST /api/v1/forms/validate HTTP/1.1
Content-Type: application/xml
Authorization: Basic XXXXXXXXXX

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xforms xmlns=&quot;http://openrosa.org/xforms/xformsList&quot;&gt;
  &lt;xform&gt;
    &lt;name&gt;Visit&lt;/name&gt;
    &lt;formID&gt;ANCVisit&lt;/formID&gt;
    &lt;hash&gt;md5:1f0f096602ed794a264ab67224608cf4&lt;/hash&gt;
    &lt;downloadUrl&gt;http://medic.local/api/v1/forms/anc_visit.xml&lt;/downloadUrl&gt;
  &lt;/xform&gt;
  &lt;xform&gt;
    &lt;name&gt;Registration with LMP&lt;/name&gt;
    &lt;formID&gt;PregnancyRegistration&lt;/formID&gt;
    &lt;hash&gt;md5:1f0f096602ed794a264ab67224608cf4&lt;/hash&gt;
    &lt;downloadUrl&gt;http://medic.local/api/v1/forms/anc_registration.xml&lt;/downloadUrl&gt;
  &lt;/xform&gt;
  &lt;xform&gt;
    &lt;name&gt;Stop&lt;/name&gt;
    &lt;formID&gt;Stop&lt;/formID&gt;
    &lt;hash&gt;md5:1f0f096602ed794a264ab67224608cf4&lt;/hash&gt;
    &lt;downloadUrl&gt;http://medic.local/api/v1/forms/off.xml&lt;/downloadUrl&gt;
  &lt;/xform&gt;
&lt;/xforms&gt;
</code></pre><p>Example response when the form passed the validations:</p><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{ok: true}
</code></pre><p>Example response when the form failed the validations:</p><pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json

{error: &quot;Error transforming xml. xsltproc return ...&quot;}
</code></pre><h2 id=records>Records</h2><h3 id=post-apiv2records>POST /api/v2/records</h3><p>Create a new record based on a <a href=https://docs.communityhealthtoolkit.org/apps/reference/app-settings/forms/>JSON form</a> that has been configured.</p><p>Records can be created one of two ways, parsing the form data yourself and submitting a JSON object or by submitting the raw message string.</p><h4 id=headers-2>Headers</h4><table><thead><tr><th>Key</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Content-Type</td><td>application/x-www-form-urlencoded</td><td>Processes form parameters.</td></tr><tr><td>Content-Type</td><td>application/json</td><td>Processes form data in request body as JSON.</td></tr></tbody></table><p>Only one variant of the <code>Content-Type</code> header may be provided; RFC 2616 does not
allow multiple content types to appear in a single <code>Content-Type</code> header.</p><h5 id=form-parameters>Form Parameters</h5><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>Message string in a supported format like Muvuku or Textforms. Depending if your CHT instance is configured in forms-only mode or not you might receive an error if the form is not found.</td></tr><tr><td>from</td><td>Reporting phone number.</td></tr><tr><td>reported_date</td><td>Timestamp in MS since Unix Epoch of when the message was received on the gateway. Defaults to now.</td></tr></tbody></table><h5 id=json-properties>JSON Properties</h5><p>Special values reside in the property <code>_meta</code>, so you can&rsquo;t have a form field named <code>_meta</code>. Only strings and numbers are currently support as field values.</p><p>All property names will be lowercased.</p><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>_meta.form</td><td>The form code.</td></tr><tr><td>_meta.from</td><td>Reporting phone number. Optional.</td></tr><tr><td>_meta.reported_date</td><td>Timestamp in MS since Unix Epoch of when the message was received on the gateway. Defaults to now.</td></tr><tr><td>_meta.locale</td><td>Optional locale string. Example: &lsquo;fr&rsquo;</td></tr></tbody></table><h4 id=examples-4>Examples</h4><p>Creating new record using message field.</p><pre><code>POST /api/v1/records
Content-Type: application/x-www-form-urlencoded

message=1!YYYZ!Sam#23#2015#ANC&amp;from=+5511943348031&amp;reported_date=1352399720000
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  &quot;success&quot;: true,
  &quot;id&quot;: &quot;364c796a843fbe0a73476f9153012733&quot;
}
</code></pre><p>Creating new record with JSON.</p><pre><code>POST /api/v1/records
Content-Type: application/json

{
  &quot;nurse&quot;: &quot;Sam&quot;,
  &quot;week&quot;: 23,
  &quot;year&quot;: 2015,
  &quot;visit&quot;: &quot;ANC&quot;,
  &quot;_meta&quot;: {
    &quot;form&quot;: &quot;YYYZ&quot;,
    &quot;reported_date&quot;: 1352399720000
  }
}
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  &quot;success&quot;: true,
  &quot;id&quot;: &quot;364c796a843fbe0a73476f9153012733&quot;
}
</code></pre><h4 id=errors>Errors</h4><p>If required fields are not found return 500.</p><p>If invalid JSON return error response 500.</p><p>If submitting JSON and corresponding form is not found on the server you will receive an error.</p><h2 id=sms>SMS</h2><h3 id=post-apisms>POST /api/sms</h3><p>Endpoint used by cht-gateway to send sms messages. More documentation in the <a href=https://github.com/medic/cht-gateway/blob/master/README.md>cht-gateway repo</a>.</p><h2 id=people>People</h2><h3 id=supported-properties>Supported Properties</h3><p>Use JSON in the request body to specify a person&rsquo;s details.</p><p>Note: this does not accommodate having a <code>place</code> field on your form and will likely be revised soon.</p><h5 id=required>Required</h5><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>String used to describe the person.</td></tr><tr><td>type</td><td>ID of the <code>contact_type</code> for the new person. Defaults to &lsquo;person&rsquo; for backwards compatibility.</td></tr></tbody></table><h5 id=optional>Optional</h5><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>place</td><td>String that references a place or object that defines a new place.</td></tr><tr><td>reported_date</td><td>Timestamp of when the record was reported or created. Defaults to now.</td></tr></tbody></table><h3 id=post-apiv1people>POST /api/v1/people</h3><p>Create new people.</p><h4 id=permissions>Permissions</h4><p>By default any user can create or modify a place. Use these permissions to restrict access:</p><p><code>can_create_people</code>, <code>can_create_places</code></p><h4 id=examples-5>Examples</h4><p>Create new person and place hierarchy.</p><pre><code>POST /api/v1/people
Content-Type: application/json

{
  &quot;name&quot;: &quot;Hannah&quot;,
  &quot;phone&quot;: &quot;+2548277210095&quot;,
  &quot;type&quot;: &quot;contact&quot;,
  &quot;contact_type&quot;: &quot;patient&quot;,
  &quot;place&quot;: {
    &quot;name&quot;: &quot;CHP Area One&quot;,
    &quot;type&quot;: &quot;health_center&quot;,
    &quot;parent&quot;: {
      &quot;name&quot;: &quot;CHP Branch One&quot;,
      &quot;type&quot;: &quot;district_hospital&quot;
    }
  }
}
</code></pre><p>Create new person and assign existing place.</p><pre><code>POST /api/v1/people
Content-Type: application/json

{
 &quot;name&quot;: &quot;Samuel&quot;,
 &quot;place&quot;: &quot;1d83f2b4a27eceb40df9e9f9ad06d137&quot;,
 &quot;type&quot;: &quot;contact&quot;,
 &quot;contact_type&quot;: &quot;chp&quot;
}
</code></pre><p>Example response:</p><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;id&quot;: &quot;71df9d25ed6732ea3b4435862510d115&quot;,
  &quot;rev&quot;: &quot;1-a4060843d78f46a60a6f41051e40e3b5&quot;
}
</code></pre><h2 id=places>Places</h2><p>By default any user can create or modify a place.</p><h3 id=supported-properties-1>Supported Properties</h3><p>Use JSON in the request body to specify a place&rsquo;s details.</p><h5 id=required-properties>Required Properties</h5><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>String used to describe the place.</td></tr><tr><td>type</td><td>Place type</td></tr><tr><td>parent</td><td>String that references a place or object that defines a new place. Optional for District Hospital and National Office types.</td></tr></tbody></table><h5 id=optional-properties>Optional Properties</h5><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>contact</td><td>String identifier for a person or object that defines a new person.</td></tr><tr><td>reported_date</td><td>Timestamp of when the record was reported or created. Defaults to now.</td></tr></tbody></table><h5 id=place-types>Place Types</h5><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>clinic</td><td>Clinic</td></tr><tr><td>health_center</td><td>Health Center</td></tr><tr><td>district_hospital</td><td>District Hospital</td></tr><tr><td>national_office</td><td>National Office</td></tr></tbody></table><h3 id=post-apiv1places>POST /api/v1/places</h3><p>Create a new place and optionally a contact.</p><h4 id=permissions-1>Permissions</h4><p>By default any user can create new places. Use these permissions to restrict access:</p><p><code>can_create_places</code>, <code>can_create_people</code></p><h4 id=examples-6>Examples</h4><p>Create new place referencing existing parent.</p><pre><code>POST /api/v1/places
Content-Type: application/json

{
 &quot;name&quot;: &quot;Busia Clinic&quot;,
 &quot;type&quot;: &quot;clinic&quot;,
 &quot;parent&quot;: &quot;1d83f2b4a27eceb40df9e9f9ad06d137&quot;
}
</code></pre><p>Create child and parent places.</p><pre><code>POST /api/v1/places
Content-Type: application/json

{
  &quot;name&quot;: &quot;CHP Area One&quot;,
  &quot;type&quot;: &quot;health_center&quot;,
  &quot;parent&quot;: {
    &quot;name&quot;: &quot;CHP Branch One&quot;,
    &quot;type&quot;: &quot;district_hospital&quot;
  }
}
</code></pre><p>Also creates contact (person).</p><pre><code>POST /api/v1/places
Content-Type: application/json

{
  &quot;name&quot;: &quot;CHP Area One&quot;,
  &quot;type&quot;: &quot;health_center&quot;,
  &quot;parent&quot;: {
    &quot;name&quot;: &quot;CHP Branch One&quot;,
    &quot;type&quot;: &quot;district_hospital&quot;
  },
  &quot;contact&quot;: {
    &quot;name&quot;: &quot;Paul&quot;,
    &quot;phone&quot;: &quot;+254883720611&quot;
  }
}
</code></pre><p>Or assigns them.</p><pre><code>POST /api/v1/places
Content-Type: application/json

{
  &quot;name&quot;: &quot;CHP Area One&quot;,
  &quot;type&quot;: &quot;health_center&quot;,
  &quot;parent&quot;: {
    &quot;name&quot;: &quot;CHP Branch One&quot;,
    &quot;type&quot;: &quot;district_hospital&quot;
  },
  &quot;contact&quot;: &quot;71df9d25ed6732ea3b4435862510ef8e&quot;
}
</code></pre><p>Example success response:</p><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;id&quot;: &quot;71df9d25ed6732ea3b4435862510d115&quot;,
  &quot;rev&quot;: &quot;1-a4060843d78f46a60a6f41051e40e3b5&quot;
}
</code></pre><p>Error response if facility structure is not correct:</p><pre><code>HTTP/1.1 400 Bad Request
Content-Type: text/plain

Health Centers should have &quot;district_hospital&quot; parent type.
</code></pre><h3 id=post-apiv1placesid>POST /api/v1/places/{{id}}</h3><p>Update a place and optionally its contact.</p><h4 id=permissions-2>Permissions</h4><p>By default any user can update a place. Use these permissions to restrict access:</p><p><code>can_update_places</code></p><h4 id=examples-7>Examples</h4><p>Update a place&rsquo;s contact.</p><pre><code>POST /api/v1/places/1d83f2b4a27eceb40df9e9f9ad06d137
Content-Type: application/json

{
 &quot;contact&quot;: &quot;71df9d25ed6732ea3b4435862505f7a9&quot;
}
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;id&quot;: &quot;1d83f2b4a27eceb40df9e9f9ad06d137&quot;,
  &quot;rev&quot;: &quot;12-a4060843d78f46a60a6f41051e40e3b5&quot;
}
</code></pre><h2 id=users>Users</h2><p>All user related requests are limited to users with admin privileges by default.</p><h3 id=supported-properties-2>Supported Properties</h3><p>Use JSON in the request body to specify user details. Any properties submitted
that are not on the list below will be ignored. Any properties not included
will be undefined.</p><table><thead><tr><th>Name</th><th>Required</th><th>Type</th><th>Description</th><th>Version</th></tr></thead><tbody><tr><td>username</td><td>yes</td><td>String</td><td>identifier used for authentication</td><td></td></tr><tr><td>roles</td><td>yes</td><td>Array</td><td></td><td></td></tr><tr><td>place</td><td>yes, if the roles contain an offline role</td><td>string or object</td><td>Place identifier string (UUID) or object this user resides in.</td><td></td></tr><tr><td>contact</td><td>yes, if the roles contain an offline role</td><td>string or object</td><td>A person identifier string (UUID) or object based on the form configured in the app.</td><td></td></tr><tr><td>password</td><td>yes, if <code>token_login</code> is not enabled for the user</td><td>String</td><td>Password string used for authentication. Only allowed to be set, not retrieved.</td><td></td></tr><tr><td>phone</td><td>yes, if <code>token_login</code> is enabled for the user</td><td>String</td><td>Valid phone number</td><td></td></tr><tr><td>token_login</td><td>no</td><td>Boolean</td><td>A boolean representing whether or not the Login by SMS should be enabled for this user.</td><td>3.10.0</td></tr><tr><td>fullname</td><td>no</td><td>String</td><td>Full name</td><td></td></tr><tr><td>email</td><td>no</td><td>String</td><td>Email address</td><td></td></tr><tr><td>known</td><td>no</td><td>Boolean</td><td>Boolean to define if the user has logged in before. Used mainly to determine whether or not to start a tour on first login.</td><td></td></tr></tbody></table><h5 id=login-by-sms>Login by SMS</h5><p>When creating or updating a user, sending a truthy value for the field <code>token_login</code> will enable Login by SMS for this user.
This action resets the user&rsquo;s password to an unknown string and generates a complex 64 character token, that is used to generate a token-login URL.
The URL is sent to the user&rsquo;s phone number by SMS, along with another (configurable) SMS that can contain additional information.
Accessing this link, before its expiration time, will log the user in directly - without the need of any other credentials.<br>The link can only be accessed once, the token becomes invalid after being used for one login.<br>The token expires in 24 hours, after which logging in is only possible by either generating a new token, or disabling <code>token_login</code> and manually setting a password.</p><p>The SMS messages are stored in a doc of a new type <code>login_token</code>. These docs cannot be viewed as reports from the webapp, and can only be edited by admins, but their messages are visible in the Admin Message Queue page.</p><p>To disable login by SMS for a user, update the user sending <code>token_login</code> with a <code>false</code> value.
To regenerate the token, update the user sending <code>token_login</code> with a <code>true</code> value.</p><table><thead><tr><th><code>token_login</code></th><th>user state</th><th>action</th></tr></thead><tbody><tr><td>undefined</td><td>new</td><td>None</td></tr><tr><td>undefined</td><td>existent, no token</td><td>None</td></tr><tr><td>undefined</td><td>existent, with token</td><td>None. Login by SMS remains enabled. Token is unchanged.</td></tr><tr><td>true</td><td>new</td><td>Login by SMS enabled. Token is generated and SMS is sent.</td></tr><tr><td>true</td><td>existent, no token</td><td>Password is reset. Login by SMS enabled. Token is generated and SMS is sent. Existent sessions are invalidated.</td></tr><tr><td>true</td><td>existent, with token</td><td>Password is reset. Login by SMS enabled. New token is generated and SMS is sent. Old token is invalid. Existent sessions are invalidated.</td></tr><tr><td>false</td><td>new</td><td>None.</td></tr><tr><td>false</td><td>existent, no token</td><td>None.</td></tr><tr><td>false</td><td>existent, with token</td><td>Request requires a password. Login by SMS is disabled. Old token is invalidated. Existent sessions are invalidated.</td></tr></tbody></table><p>This feature uses <a href=/apps/reference/app-settings/#app_settingsjson><code>app_settings.app_url</code></a> and <a href=/apps/reference/app-settings/token_login/><code>app_settings.token_login</code></a> to be defined and enabled.
If <code>app_settings.app_url</code> is not defined, the generated token-login URL will use the <code>Host</code> request header, which may not always be correct.</p><p><em>See Also</em>: <a href=https://docs.communityhealthtoolkit.org/apps/concepts/access/#remote-login>Accessing CHT Apps</a></p><h3 id=get-apiv1users>GET /api/v1/users</h3><p>Returns a list of users and their profile data in JSON format.</p><h5 id=permissions-3>Permissions</h5><p><code>can_view_users</code></p><h4 id=examples-8>Examples</h4><p>Get list of users:</p><pre><code>GET /api/v1/users
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

[
  {
    &quot;id&quot;: &quot;org.couchdb.user:admin&quot;,
    &quot;rev&quot;: &quot;10-6486428924d11781c107ea74de6b63b6&quot;,
    &quot;type&quot;: &quot;admin&quot;,
    &quot;username&quot;: &quot;admin&quot;
  },
  {
    &quot;id&quot;: &quot;org.couchdb.user:demo&quot;,
    &quot;rev&quot;: &quot;14-8758c8493edcc6dac50366173fc3e24a&quot;,
    &quot;type&quot;: &quot;district-manager&quot;,
    &quot;fullname&quot;: &quot;Example User&quot;,
    &quot;username&quot;: &quot;demo&quot;,
    &quot;place&quot;: {
      &quot;_id&quot;: &quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17d38b&quot;,
      &quot;type&quot;: &quot;district_hospital&quot;,
      &quot;name&quot;: &quot;Sample District&quot;,
      &quot;contact&quot;: {
        &quot;_id&quot;: &quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17fd17&quot;,
        &quot;type&quot;: &quot;person&quot;,
        &quot;name&quot;: &quot;Paul&quot;,
        &quot;phone&quot;: &quot;+2868917046&quot;
      }
    },
    &quot;contact&quot;: {
      &quot;_id&quot;: &quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17fd17&quot;,
      &quot;type&quot;: &quot;person&quot;,
      &quot;name&quot;: &quot;Paul&quot;,
      &quot;phone&quot;: &quot;+2868917046&quot;
    }
  }
]
</code></pre><h3 id=post-apiv1users>POST /api/v1/users</h3><p>Create new users with a place and a contact.</p><p>Creating multiple users at once by passing an array of users was introduced in version 3.15.<br>All users need to meet the following requirements before any of them are created:</p><ul><li>All required fields are filled in</li><li>The password is at least 8 characters long and difficult to guess</li><li>The phone number is valid when <a href=https://docs.communityhealthtoolkit.org/apps/reference/app-settings/token_login/><code>token_login</code></a> is enabled</li></ul><p>Users are created in parallel and the creation is not aborted even if one of the users fails to be created.</p><p>Passing a single user in the request&rsquo;s body will return a single object whereas
passing an array of users will return an array of objects as shown in the examples below.</p><h4 id=permissions-4>Permissions</h4><p><code>can_create_users</code></p><h4 id=examples-9>Examples</h4><h5 id=create-one-user>Create one user</h5><p>Create a new user that can authenticate with a username of &ldquo;mary&rdquo; and password
of &ldquo;secret&rdquo; that can submit reports and view or modify records associated to
their place. The place is created in the background and automatically linked
to the contact.</p><pre><code>POST /api/v1/users
Content-Type: application/json

{
  &quot;password&quot;: &quot;secret&quot;,
  &quot;username&quot;: &quot;mary&quot;,
  &quot;type&quot;: &quot;district-manager&quot;,
  &quot;place&quot;: {
    &quot;name&quot;: &quot;Mary's Area&quot;,
    &quot;type&quot;: &quot;health_center&quot;,
    &quot;parent&quot;: &quot;d14e1c3d557761320b13a77e7806e8f8&quot;
  },
  &quot;contact&quot;: {
    &quot;name&quot;: &quot;Mary Anyango&quot;,
    &quot;phone&quot;: &quot;+2868917046&quot;
  }
}
</code></pre><pre><code>HTTP/1.1 200
Content-Type: application/json

{
  &quot;contact&quot;: {
    &quot;id&quot;: &quot;65416b8ceb53ff88ac1847654501aeb3&quot;,
    &quot;rev&quot;: &quot;1-0b74d219ae13137c1a06f03a0a52e187&quot;
  },
  &quot;user-settings&quot;: {
    &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
    &quot;rev&quot;: &quot;1-6ac1d36b775143835f4af53f9895d7ae&quot;
  },
  &quot;user&quot;: {
    &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
    &quot;rev&quot;: &quot;1-c3b82a0b47cfe68edd9284c89bebbae4&quot;
  }
}
</code></pre><h5 id=create-many-users>Create many users</h5><p>Create two new users that can authenticate with a username and a password
that can submit reports and view or modify records associated to their place.
The place is created in the background and automatically linked to the contact.</p><pre><code>POST /api/v1/users
Content-Type: application/json

[
  {
    &quot;password&quot;: &quot;secret&quot;,
    &quot;username&quot;: &quot;mary&quot;,
    &quot;type&quot;: &quot;district-manager&quot;,
    &quot;place&quot;: {
      &quot;name&quot;: &quot;Mary's Area&quot;,
      &quot;type&quot;: &quot;health_center&quot;,
      &quot;parent&quot;: &quot;d14e1c3d557761320b13a77e7806e8f8&quot;
    },
    &quot;contact&quot;: {
      &quot;name&quot;: &quot;Mary Anyango&quot;,
      &quot;phone&quot;: &quot;+2868917046&quot;
    }
  },
  {
    &quot;password&quot;: &quot;secret&quot;,
    &quot;username&quot;: &quot;bob&quot;,
    &quot;type&quot;: &quot;district-manager&quot;,
    &quot;place&quot;: {
      &quot;name&quot;: &quot;Bob's Area&quot;,
      &quot;type&quot;: &quot;health_center&quot;,
      &quot;parent&quot;: &quot;d14e1c3d557761320b13a77e7806e8f8&quot;
    },
    &quot;contact&quot;: {
      &quot;name&quot;: &quot;Bob Johnson&quot;,
      &quot;phone&quot;: &quot;+2868194607&quot;
    }
  }
]
</code></pre><pre><code>HTTP/1.1 200
Content-Type: application/json

[
  {
    &quot;contact&quot;: {
      &quot;id&quot;: &quot;65416b8ceb53ff88ac1847654501aeb3&quot;,
      &quot;rev&quot;: &quot;1-0b74d219ae13137c1a06f03a0a52e187&quot;
    },
    &quot;user-settings&quot;: {
      &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
      &quot;rev&quot;: &quot;1-6ac1d36b775143835f4af53f9895d7ae&quot;
    },
    &quot;user&quot;: {
      &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
      &quot;rev&quot;: &quot;1-c3b82a0b47cfe68edd9284c89bebbae4&quot;
    }
  },
  {
    &quot;contact&quot;: {
      &quot;id&quot;: &quot;8d8a741c1cb441058e29a60ab7596bf2&quot;,
      &quot;rev&quot;: &quot;1-acbc31712fd105eae3cd0806cd20a8f4&quot;
    },
    &quot;user-settings&quot;: {
      &quot;id&quot;: &quot;org.couchdb.user:bob&quot;,
      &quot;rev&quot;: &quot;1-d8629838127accd531043f845c416ef6&quot;
    },
    &quot;user&quot;: {
      &quot;id&quot;: &quot;org.couchdb.user:bob&quot;,
      &quot;rev&quot;: &quot;1-5eac2542c801ba6b518728f53d9276a0&quot;
    }
  }
]
</code></pre><h4 id=errors-1>Errors</h4><h5 id=response-when-the-username-already-exists>Response when the username already exists</h5><pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json

{
  &quot;code&quot;: 400,
  &quot;error&quot;: {
    &quot;message&quot;: &quot;Username \&quot;mary\&quot; already taken.&quot;,
    &quot;translationKey&quot;: &quot;username.taken&quot;,
    &quot;translationParams&quot;: {
      &quot;username&quot;: &quot;mary&quot;
    }
  }
}
</code></pre><h5 id=response-when-users-are-missing-required-fields>Response when users are missing required fields</h5><pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json

{
  &quot;code&quot;: 400,
  &quot;error&quot;: &quot;Missing required fields:\n\Missing fields username, password, type or roles for user at index 0\nMissing fields password, type or roles for user at index 1&quot;,
  &quot;details&quot;: {
    &quot;failingIndexes&quot;: [
      {
        &quot;fields&quot;: [
          &quot;username&quot;,
          &quot;password&quot;,
          &quot;type or roles&quot;
        ],
        &quot;index&quot;: 0
      },
      {
        &quot;fields&quot;: [
          &quot;password&quot;,
          &quot;type or roles&quot;
        ],
        &quot;index&quot;: 1
      }
    ]
  }
}
</code></pre><h5 id=response-when-some-users-failed-to-be-created>Response when some users failed to be created</h5><pre><code>HTTP/1.1 200
Content-Type: application/json

[
  {
    &quot;contact&quot;: {
      &quot;id&quot;: &quot;65416b8ceb53ff88ac1847654501aeb3&quot;,
      &quot;rev&quot;: &quot;1-0b74d219ae13137c1a06f03a0a52e187&quot;
    },
    &quot;user-settings&quot;: {
      &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
      &quot;rev&quot;: &quot;1-6ac1d36b775143835f4af53f9895d7ae&quot;
    },
    &quot;user&quot;: {
      &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
      &quot;rev&quot;: &quot;1-c3b82a0b47cfe68edd9284c89bebbae4&quot;
    }
  },
  {
    &quot;error&quot;: &quot;Failed to find place.&quot;
  }
]
</code></pre><h3 id=post-apiv1usersusername>POST /api/v1/users/{{username}}</h3><p>Allows you to change property values on a user account. Properties listed above
are supported except for <code>contact.parent</code>. Creating or modifying people
through the user is not supported, see People section.</p><h4 id=permissions-5>Permissions</h4><p><code>can_update_users</code>, <code>can_update_places</code>, <code>can_update_people</code></p><h4 id=updating-yourself>Updating yourself</h4><p>You do not need any of the above permissions if the user you are modifying is yourself. However, you are not allowed to modify your <code>type</code>, <code>roles</code>, <code>contact</code> or <code>place</code>.</p><p>Further more, if you&rsquo;re updating your <code>password</code> you must be authenticating via Basic Auth (either the header or in the URL). This is to ensure the password is known at time of request, and no one is hijacking a cookie.</p><h4 id=url-parameters>URL Parameters</h4><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td>username</td><td>String identifier used for authentication.</td></tr></tbody></table><h4 id=examples-10>Examples</h4><pre><code>POST /api/v1/users/mary
Content-Type: application/json

{
  &quot;password&quot;: &quot;secret&quot;,
  &quot;place&quot;: &quot;eeb17d6d-5dde-c2c0-62c4a1a0ca17e342&quot;
}
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;user&quot;: {
    &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
    &quot;rev&quot;: &quot;23-858e01fafdfa0d367d798fe5b44751ff&quot;
  },
  &quot;user-settings&quot;: {
    &quot;id&quot;: &quot;org.couchdb.user:mary&quot;,
    &quot;rev&quot;: &quot;17-c6d03b86d2d5d70f7270c85e67fea96d&quot;
  }
}
</code></pre><h3 id=delete-apiv1usersusername>DELETE /api/v1/users/{{username}}</h3><p>Delete a user. Does not affect a person or place associated to a user.</p><h4 id=permissions-6>Permissions</h4><p><code>can_delete_users</code></p><h4 id=url-parameters-1>URL Parameters</h4><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td>username</td><td>String identifier used for authentication.</td></tr></tbody></table><h4 id=examples-11>Examples</h4><pre><code>DELETE /api/v1/users/mary
</code></pre><pre><code>HTTP/1.1 200 OK
</code></pre><h3 id=get-apiv1users-info>GET /api/v1/users-info</h3><p>Returns the total number of documents an offline user would replicate (<code>total_docs</code>), the number of docs excluding tasks the user would replicate (<code>warn_docs</code>), along with a <code>warn</code> flag if this number exceeds the recommended limit (now set at 10 000).</p><p>When the authenticated requester has an offline role, it returns the requester doc count.</p><h6 id=example>Example</h6><pre><code>GET /api/v1/users-info -H 'Cookie: AuthSession=OFFLINE_USER_SESSION;'
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;total_docs&quot;: 5678,
  &quot;warn_docs&quot;: 4852,
  &quot;warn&quot;: false,
  &quot;limit: 10000
}
</code></pre><p>When the requester has an online role, the following query parameters are accepted:</p><h5 id=query-parameters-4>Query Parameters</h5><table><thead><tr><th>Variable</th><th>Description</th><th>Required</th></tr></thead><tbody><tr><td>facility_id</td><td>String identifier representing the uuid of the user&rsquo;s facility</td><td>true</td></tr><tr><td>role</td><td>String identifier representing the user role - must be configured as an offline role. Accepts valid UTF-8 JSON array for multiple of roles.</td><td>true</td></tr><tr><td>contact_id</td><td>String identifier representing the uuid of the user&rsquo;s associated contact</td><td>false</td></tr></tbody></table><p>When requested as an online user, the number of tasks are never counted and never returned, so <code>warn_docs</code> is always equal to <code>total_docs</code>.</p><h6 id=example-1>Example</h6><pre><code>GET /api/v1/users-info?facility_id={{facility_uuid}}&amp;role={{role}}&amp;contact_id={{contact_uuid}} -H 'Cookie: AuthSession=OFFLINE_USER_SESSION;'
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;total_docs&quot;: 10265,
  &quot;warn_docs&quot;: 10265,
  &quot;warn&quot;: true,
  &quot;limit: 10000
}
</code></pre><p>In case any of the required query parameters are omitted or the requested role is not configured as an offline role, the request will result in an error:</p><pre><code>GET /api/v1/users-info?role={{online_role}} -H 'Cookie: AuthSession=OFFLINE_USER_SESSION;'
</code></pre><pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json

{
  &quot;code&quot;: 400,
  &quot;error&quot;: &quot;Missing required query params: role and/or facility_id&quot;
}
</code></pre><h2 id=bulk-operations>Bulk Operations</h2><h3 id=post-apiv1bulk-delete>POST /api/v1/bulk-delete</h3><p>Bulk delete endpoint for deleting large numbers of documents. Docs will be batched into groups of 100 and will be sent sequentially to couch (new batch sent after the previous one has returned). The response will be chunked JSON (one batch at a time), so if you wish to get an indication of progress you will need to parse incomplete JSON (with a library such as <a href=https://github.com/indgov/partial-json-parser><code>partial-json-parser</code></a>.</p><h4 id=permissions-7>Permissions</h4><p>Only available to online users.</p><h4 id=parameters-1>Parameters</h4><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>docs</td><td>Array of JSON objects with <code>_id</code> properties</td></tr></tbody></table><p>An array of objects each with an <code>_id</code> property is required (rather than an array of strings representing ids) to ensure forwards compatibility if we choose to require that any additional document information (such as <code>_rev</code>) also be passed in to this endpoint.</p><h4 id=errors-2>Errors</h4><p>If an error is encountered part-way through the response (eg on the third batch), it&rsquo;s impossible to send new headers to indicate a 5xx error, so the connection will simply be terminated (as recommended here <a href=https://github.com/expressjs/express/issues/2700)>https://github.com/expressjs/express/issues/2700)</a>.</p><h4 id=examples-12>Examples</h4><pre><code>POST /api/v1/bulk-delete
Content-Type: application/json

{
  &quot;docs&quot;: [
    { &quot;_id&quot;: &quot;id1&quot; },
    { &quot;_id&quot;: &quot;id2&quot; },
    ...
    { &quot;_id&quot;: &quot;id150&quot; }
  ]
}
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

[
  [
    { &quot;ok&quot;: true, &quot;id&quot;: &quot;id1&quot;, &quot;rev&quot;: &quot;1-rev1&quot; },
    { &quot;ok&quot;: true, &quot;id&quot;: &quot;id2&quot;, &quot;rev&quot;: &quot;1-rev2&quot; },
    ...
    { &quot;ok&quot;: true, &quot;id&quot;: &quot;id100&quot;, &quot;rev&quot;: &quot;1-rev100&quot; }
  ],
  [
    { &quot;ok&quot;: true, &quot;id&quot;: &quot;id101&quot;, &quot;rev&quot;: &quot;1-rev101&quot; },
    { &quot;ok&quot;: true, &quot;id&quot;: &quot;id102&quot;, &quot;rev&quot;: &quot;1-rev102&quot; },
    ...
    { &quot;ok&quot;: true, &quot;id&quot;: &quot;id150&quot;, &quot;rev&quot;: &quot;1-rev150&quot; }
  ]
]
</code></pre><h2 id=monitoring>Monitoring</h2><h3 id=get-apiv1monitoring>GET /api/v1/monitoring</h3><p><em>Deprecated in 3.12.x in favor of <a href=#get-apiv2monitoring>/api/v2/monitoring</a></em><br>Used to retrieve a range of metrics about the instance. While the output is human-readable this is intended for automated monitoring allowing for tracking trends over time and alerting about potential issues.</p><h4 id=permissions-8>Permissions</h4><p>No permissions required.</p><h4 id=examples-13>Examples</h4><h5 id=json-format>JSON format</h5><pre><code>curl http://localhost:5988/api/v1/monitoring

{&quot;version&quot;:{&quot;app&quot;:&quot;3.9.0&quot;,&quot;node&quot;:&quot;v10.16.0&quot;,&quot;couchdb&quot;:&quot;2.3.1&quot;},&quot;couchdb&quot;:{&quot;medic&quot;:{&quot;name&quot;:&quot;medic&quot;,&quot;update_sequence&quot;:5733,&quot;doc_count&quot;:278,&quot;doc_del_count&quot;:32,&quot;fragmentation&quot;:1.0283517758420173}...
</code></pre><h4 id=response-content>Response content</h4><table><thead><tr><th>JSON path</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>version.app</code></td><td>String</td><td>The version of the webapp.</td></tr><tr><td><code>version.node</code></td><td>String</td><td>The version of NodeJS.</td></tr><tr><td><code>version.couchdb</code></td><td>String</td><td>The version of CouchDB.</td></tr><tr><td><code>couchdb.&lt;dbname>.name</code></td><td>String</td><td>The name of the db, usually one of &ldquo;medic&rdquo;, &ldquo;medic-sentinel&rdquo;, &ldquo;medic-users-meta&rdquo;, &ldquo;_users&rdquo;.</td></tr><tr><td><code>couchdb.&lt;dbname>.update_sequence</code></td><td>Number</td><td>The number of changes in the db.</td></tr><tr><td><code>couchdb.&lt;dbname>.doc_count</code></td><td>Number</td><td>The number of docs in the db.</td></tr><tr><td><code>couchdb.&lt;dbname>.doc_del_count</code></td><td>Number</td><td>The number of deleted docs in the db.</td></tr><tr><td><code>couchdb.&lt;dbname>.fragmentation</code></td><td>Number</td><td>The fragmentation of the db, lower is better, &ldquo;1&rdquo; is no fragmentation.</td></tr><tr><td><code>date.current</code></td><td>Number</td><td>The current server date in millis since the epoch, useful for ensuring the server time is correct.</td></tr><tr><td><code>date.uptime</code></td><td>Number</td><td>How long API has been running.</td></tr><tr><td><code>sentinel.backlog</code></td><td>Number</td><td>Number of changes yet to be processed by Sentinel.</td></tr><tr><td><code>messaging.outgoing.state.due</code></td><td>Number</td><td>The number of messages due to be sent.</td></tr><tr><td><code>messaging.outgoing.state.scheduled</code></td><td>Number</td><td>The number of messages scheduled to be sent in the future.</td></tr><tr><td><code>messaging.outgoing.state.muted</code></td><td>Number</td><td>The number of messages that are muted and therefore will not be sent.</td></tr><tr><td><code>messaging.outgoing.state.delivered</code></td><td>Number</td><td>The number of messages that have been delivered or sent. As of 3.12.x.</td></tr><tr><td><code>messaging.outgoing.state.failed</code></td><td>Number</td><td>The number of messages have failed to be delivered. As of 3.12.x</td></tr><tr><td><code>outbound_push.backlog</code></td><td>Number</td><td>Number of changes yet to be processed by Outbound Push.</td></tr><tr><td><code>feedback.count</code></td><td>Number</td><td>Number of feedback docs created usually indicative of client side errors.</td></tr><tr><td><code>conflict.count</code></td><td>Number</td><td>Number of doc conflicts which need to be resolved manually.</td></tr><tr><td><code>replication_limit.count</code></td><td>Number</td><td>Number of users that exceeded the replication limit of documents.</td></tr><tr><td><code>connected_users.count</code></td><td>Number</td><td>Number of users that have connected to the api in a given number of days. The period defaults to 7 days but this can be changed by adding <code>connected_user_interval</code> as a query parameter e.g. <code>http://localhost:5988/api/v1/monitoring?connected_user_interval=14</code></td></tr></tbody></table><h4 id=errors-3>Errors</h4><ul><li>A metric of <code>""</code> (for string values) or <code>-1</code> (for numeric values) indicates an error occurred while querying the metric - check the API logs for details.</li><li>If no response or an error response is received the instance is unreachable. Thus, this API can be used as an uptime monitoring endpoint.</li></ul><h3 id=get-apiv2monitoring>GET /api/v2/monitoring</h3><p>Available as of 3.12.x.
Used to retrieve a range of metrics about the instance. While the output is human-readable this is intended for automated monitoring allowing for tracking trends over time and alerting about potential issues.</p><h4 id=permissions-9>Permissions</h4><p>No permissions required.</p><h4 id=examples-14>Examples</h4><h5 id=json-format-1>JSON format</h5><pre><code>curl http://localhost:5988/api/v2/monitoring

{&quot;version&quot;:{&quot;app&quot;:&quot;3.12.0&quot;,&quot;node&quot;:&quot;v10.16.0&quot;,&quot;couchdb&quot;:&quot;2.3.1&quot;},&quot;couchdb&quot;:{&quot;medic&quot;:{&quot;name&quot;:&quot;medic&quot;,&quot;update_sequence&quot;:5733,&quot;doc_count&quot;:278,&quot;doc_del_count&quot;:32,&quot;fragmentation&quot;:1.0283517758420173}...
</code></pre><h4 id=response-content-1>Response content</h4><table><thead><tr><th>JSON path</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>version.app</code></td><td>String</td><td>The version of the webapp.</td></tr><tr><td><code>version.node</code></td><td>String</td><td>The version of NodeJS.</td></tr><tr><td><code>version.couchdb</code></td><td>String</td><td>The version of CouchDB.</td></tr><tr><td><code>couchdb.&lt;dbname>.name</code></td><td>String</td><td>The name of the db, usually one of &ldquo;medic&rdquo;, &ldquo;medic-sentinel&rdquo;, &ldquo;medic-users-meta&rdquo;, &ldquo;_users&rdquo;.</td></tr><tr><td><code>couchdb.&lt;dbname>.update_sequence</code></td><td>Number</td><td>The number of changes in the db.</td></tr><tr><td><code>couchdb.&lt;dbname>.doc_count</code></td><td>Number</td><td>The number of docs in the db.</td></tr><tr><td><code>couchdb.&lt;dbname>.doc_del_count</code></td><td>Number</td><td>The number of deleted docs in the db.</td></tr><tr><td><code>couchdb.&lt;dbname>.fragmentation</code></td><td>Number</td><td>The fragmentation of the db, lower is better, &ldquo;1&rdquo; is no fragmentation.</td></tr><tr><td><code>date.current</code></td><td>Number</td><td>The current server date in millis since the epoch, useful for ensuring the server time is correct.</td></tr><tr><td><code>date.uptime</code></td><td>Number</td><td>How long API has been running.</td></tr><tr><td><code>sentinel.backlog</code></td><td>Number</td><td>Number of changes yet to be processed by Sentinel.</td></tr><tr><td><code>messaging.outgoing.total.due</code></td><td>Number</td><td>The number of messages due to be sent.</td></tr><tr><td><code>messaging.outgoing.total.scheduled</code></td><td>Number</td><td>The number of messages scheduled to be sent in the future.</td></tr><tr><td><code>messaging.outgoing.total.muted</code></td><td>Number</td><td>The number of messages that are muted and therefore will not be sent.</td></tr><tr><td><code>messaging.outgoing.total.delivered</code></td><td>Number</td><td>The number of messages that have been delivered or sent.</td></tr><tr><td><code>messaging.outgoing.total.failed</code></td><td>Number</td><td>The number of messages have failed to be delivered.</td></tr><tr><td><code>messaging.outgoing.seven_days.due</code></td><td>Number</td><td>The number of messages due to be sent in the last seven days.</td></tr><tr><td><code>messaging.outgoing.seven_days.scheduled</code></td><td>Number</td><td>The number of messages that were scheduled to be sent in the last seven days.</td></tr><tr><td><code>messaging.outgoing.seven_days.muted</code></td><td>Number</td><td>The number of messages that were due in the last seven days and are muted.</td></tr><tr><td><code>messaging.outgoing.seven_days.delivered</code></td><td>Number</td><td>The number of messages that were due in the last seven days and have been delivered or sent.</td></tr><tr><td><code>messaging.outgoing.seven_days.failed</code></td><td>Number</td><td>The number of messages that were due in the last seven days and have failed to be delivered.</td></tr><tr><td><code>messaging.outgoing.last_hundred.pending</code></td><td>Object</td><td>Counts within last 100 messages that have received status updates, and are one of the &ldquo;pending&rdquo; group statuses</td></tr><tr><td><code>messaging.outgoing.last_hundred.pending.pending</code></td><td>Number</td><td>Number of messages that are pending</td></tr><tr><td><code>messaging.outgoing.last_hundred.pending.forwarded-to-gateway</code></td><td>Number</td><td>Number of messages that are forwarded-to-gateway</td></tr><tr><td><code>messaging.outgoing.last_hundred.pending.received-by-gateway</code></td><td>Number</td><td>Number of messages that are received-by-gateway</td></tr><tr><td><code>messaging.outgoing.last_hundred.pending.forwarded-by-gateway</code></td><td>Number</td><td>Number of messages that are forwarded-by-gateway</td></tr><tr><td><code>messaging.outgoing.last_hundred.final</code></td><td>Object</td><td>Counts within last 100 messages that have received status updates, and are in one of the &ldquo;final&rdquo; group statuses</td></tr><tr><td><code>messaging.outgoing.last_hundred.final.sent</code></td><td>Number</td><td>Number of messages that are sent</td></tr><tr><td><code>messaging.outgoing.last_hundred.final.delivered</code></td><td>Number</td><td>Number of messages that are delivered</td></tr><tr><td><code>messaging.outgoing.last_hundred.final.failed</code></td><td>Number</td><td>Number of messages that are failed</td></tr><tr><td><code>messaging.outgoing.last_hundred.muted</code></td><td>Object</td><td>Counts within last 100 messages that have received status updates, and are in one of the &ldquo;muted&rdquo; group statuses</td></tr><tr><td><code>messaging.outgoing.last_hundred.final.denied</code></td><td>Number</td><td>Number of messages that are denied</td></tr><tr><td><code>messaging.outgoing.last_hundred.final.cleared</code></td><td>Number</td><td>Number of messages that are cleared</td></tr><tr><td><code>messaging.outgoing.last_hundred.final.muted</code></td><td>Number</td><td>Number of messages that are muted</td></tr><tr><td><code>messaging.outgoing.last_hundred.final.duplicate</code></td><td>Number</td><td>Number of messages that are duplicate</td></tr><tr><td><code>outbound_push.backlog</code></td><td>Number</td><td>Number of changes yet to be processed by Outbound Push.</td></tr><tr><td><code>feedback.count</code></td><td>Number</td><td>Number of feedback docs created usually indicative of client side errors.</td></tr><tr><td><code>conflict.count</code></td><td>Number</td><td>Number of doc conflicts which need to be resolved manually.</td></tr><tr><td><code>replication_limit.count</code></td><td>Number</td><td>Number of users that exceeded the replication limit of documents.</td></tr><tr><td><code>connected_users.count</code></td><td>Number</td><td>Number of users that have connected to the api in a given number of days. The period defaults to 7 days but this can be changed by adding <code>connected_user_interval</code> as a query parameter e.g. <code>http://localhost:5988/api/v2/monitoring?connected_user_interval=14</code></td></tr></tbody></table><h4 id=errors-4>Errors</h4><ul><li>A metric of <code>""</code> (for string values) or <code>-1</code> (for numeric values) indicates an error occurred while querying the metric - check the API logs for details.</li><li>If no response or an error response is received the instance is unreachable. Thus, this API can be used as an uptime monitoring endpoint.</li></ul><h2 id=upgrades>Upgrades</h2><p>All of these endpoints require the <code>can_configure</code> permission.</p><p>All of these endpoints are asynchronous. Progress can be followed by watching the <code>horti-upgrade</code> document and looking at the <code>log</code> property.</p><h3 id=post-apiv1upgrade>POST /api/v1/upgrade</h3><p>Performs a complete upgrade to the provided version. This is equivalent of calling <code>/api/v1/upgrade/stage</code> and then <code>/api/v1/upgrade/complete</code> once staging has finished.</p><h4 id=example-2>Example</h4><pre><code>POST /api/v1/upgrade
{
  &quot;build&quot;: {
    &quot;namespace&quot;: &quot;medic&quot;,
    &quot;application&quot;: &quot;medic&quot;,
    &quot;version&quot;: &quot;3.0.0-beta.1&quot;
  }
}
</code></pre><p>For potential forwards compatibility, you must pass the <code>namespace</code> and <code>application</code> as <code>medic</code>.</p><p>The <code>version</code> should correspond to a release, pre-release or branch that has been pushed to our builds server, which is currently hard-coded to <code>https://staging.dev.medicmobile.org/builds</code>. This happens automatically upon a successful travis run.</p><p>Calling this endpoint will eventually cause api and sentinel to restart.</p><p>It is expected that the caller ensures forwards or backwards compatibility is maintained between deployed versions. This endpoint does not stop you from &ldquo;upgrading&rdquo; to an earlier version, or a branch that is incompatible with your current state.</p><h3 id=post-apiv1upgradestage>POST /api/v1/upgrade/stage</h3><p>Stages an upgrade to the provided version. Does as much of the upgrade as possible without actually swapping versions over and restarting.</p><p>Parameters are the same as <code>/api/v1/upgrade</code>.</p><p>You know that an upgrade has been staged when the <code>horti-upgrade</code> document in CouchDB has <code>"action": "stage"</code> and <code>"staging_complete": true</code>.</p><h3 id=post-apiv1upgradecomplete>POST /api/v1/upgrade/complete</h3><p>Completes a staged upgrade. Throws a <code>404</code> if there is no upgrade in the staged position.</p><h2 id=hydrate>Hydrate</h2><p>Accepts a JSON array of document uuids and returns fully hydrated documents, in the same order in which they were requested.
When documents are not found, an entry with the missing uuid and an error is added instead.<br>Supports both GET and POST.
Only allowed for users with &ldquo;online&rdquo; roles.</p><h3 id=get-apiv1hydrate>GET api/v1/hydrate</h3><h5 id=query-parameters-5>Query parameters</h5><table><thead><tr><th>Name</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>doc_ids</td><td>true</td><td>A JSON array of document uuids</td></tr></tbody></table><h5 id=example-3>Example</h5><pre><code>GET /api/v1/hydrate?doc_ids=[&quot;id1&quot;,&quot;missingId&quot;,&quot;id3&quot;]
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

[
  { &quot;id&quot;: &quot;id1&quot;, &quot;doc&quot;: { &lt;...the hydrated document...&gt; } },
  { &quot;id&quot;: &quot;missingId1&quot;, &quot;error&quot;: &quot;not_found&quot; },
  { &quot;id&quot;: &quot;id3&quot;, &quot;doc&quot;: { &lt;...the hydrated document...&gt; } },
]
</code></pre><h3 id=post-apiv1hydrate>POST api/v1/hydrate</h3><h5 id=parameters-2>Parameters</h5><table><thead><tr><th>Name</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>doc_ids</td><td>true</td><td>A JSON array of document uuids</td></tr></tbody></table><h5 id=example-4>Example</h5><pre><code>POST /api/v1/hydrate
Content-Type: application/json

{
  &quot;doc_ids&quot;: [&quot;id1&quot;,&quot;missingId&quot;,&quot;id3&quot;]
}

</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

[
  { &quot;id&quot;: &quot;id1&quot;, &quot;doc&quot;: { &lt;...the hydrated document...&gt; } },
  { &quot;id&quot;: &quot;missingId&quot;, &quot;error&quot;: &quot;not_found&quot; },
  { &quot;id&quot;: &quot;id3&quot;, &quot;doc&quot;: { &lt;...the hydrated document...&gt; } },
]
</code></pre><h2 id=contacts-by-phone>Contacts by phone</h2><p><em>Added in 3.10.0</em>
Accepts a phone number parameter and returns fully hydrated contacts that match the requested phone number.
If multiple contacts are found, all are returned. When no matches are found, a 404 error is returned.
Supports both GET and POST.
Only allowed for users with &ldquo;online&rdquo; roles.</p><h3 id=get-apiv1contacts-by-phone>GET api/v1/contacts-by-phone</h3><h4 id=query-parameters-6>Query parameters</h4><table><thead><tr><th>Name</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>phone</td><td>true</td><td>A URL encoded string representing a phone number</td></tr></tbody></table><h4 id=example-5>Example</h4><pre><code>GET /api/v1/contacts-by-phone?phone=&quot;%2B40-(744)-999-999&quot;
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;ok&quot;: true,
  &quot;docs&quot;: {
    { &lt;... first hydrated matching contact found ...&gt; },
    { &lt;... second hydrated matching contact found ...&gt; },
    ...
  }
}
</code></pre><h3 id=post-apiv1contacts-by-phone>POST api/v1/contacts-by-phone</h3><h4 id=parameters-3>Parameters</h4><table><thead><tr><th>Name</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>phone</td><td>true</td><td>A string representing a phone number</td></tr></tbody></table><h4 id=example-6>Example</h4><pre><code>POST /api/v1/contacts-by-phone
Content-Type: application/json

{
  &quot;phone&quot;: &quot;+40 (21) 222-3333&quot;
}

</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;ok&quot;: true,
  &quot;docs&quot;: {
    { &lt;... first hydrated matching contact found ...&gt; },
    { &lt;... second hydrated matching contact found ...&gt; },
    ...
  }
}
</code></pre><h2 id=replication-limit>Replication Limit</h2><p><em>Added in 3.11.0</em>
Returns the quantity of documents that were replicated by each user.
Accepts filtering by user name, when not provided, it returns all users.
Supports GET.
Only allowed for users with &ldquo;_admin&rdquo; role.</p><h3 id=get-apiv1users-doc-count>GET /api/v1/users-doc-count</h3><h4 id=query-parameters-7>Query parameters</h4><table><thead><tr><th>Name</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>user</td><td>false</td><td>User&rsquo;s name</td></tr></tbody></table><h4 id=example-7>Example</h4><pre><code>GET /api/v1/users-doc-count?user=mary&quot;
</code></pre><pre><code>HTTP/1.1 200 OK
Content-Type: application/json

{
    &quot;limit&quot;: 10000,
    &quot;users&quot;: {
        &quot;_id&quot;: &quot;replication-count-mary&quot;,
        &quot;_rev&quot;: &quot;5-cd3252e852ae075da216c3c3fe461291&quot;,
        &quot;user&quot;: &quot;mary&quot;,
        &quot;date&quot;: 1595328973273,
        &quot;count&quot;: 58
    }
}
</code></pre><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/medic/cht-docs/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/medic/cht-docs/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified 01.03.2022: <a href=https://github.com/medic/cht-docs/commit/68b033034a3cdfadd521041850623401658b27dc>Update `POST /api/v1/users` documentation for bulk user creation (#614) (68b0330)</a><div class="d-xl-none d-print-none meta-links"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/medic/cht-docs/edit/main/content/en/apps/reference/api.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/medic/cht-docs/issues/new?title=Improve+%27API%20to%20interact%20with%20CHT%20Applications%27&labels=enhancement&body=Page:+/apps/reference/api/%0aVersion:+2022-03-01%2010:10:44%20+0100%20+0100%0a---" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/medic/cht-core/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div></div></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 CHT All Rights Reserved</small>
<small class=ml-1><a href="https://docs.google.com/document/d/1MaI1rgYMNyCZF2eEjBuvnBDoCYHDKlx4k_N5pkDiWu8/edit?usp=sharing" target=_blank>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.fe96fb3036eca951c7eb0789e66bdef1d3d7e75919b9ecf624883f34a0f4272e.js integrity="sha256-/pb7MDbsqVHH6weJ5mve8dPX51kZuez2JIg/NKD0Jy4=" crossorigin=anonymous></script></body></html>