<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Community Health Toolkit – Building and Maintaining Forms</title><link>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/</link><description>Recent content in Building and Maintaining Forms on Community Health Toolkit</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/index.xml" rel="self" type="application/rss+xml"/><item><title>Apps: Creating Additional Docs from App Forms</title><link>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/additional-docs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/additional-docs/</guid><description>
&lt;p>In version 2.13.0 and higher, you can configure app forms to generate additional docs upon submission. You can create one or more docs using variations on the configuration described below. One case where this can be used is to register a newborn from a delivery report, as shown below. First, here is an overview of what you can do and how the configuration should look in XML:&lt;/p>
&lt;h2 id="extra-docs">Extra Docs&lt;/h2>
&lt;p>Extra docs can be added by defining structures in the model with the attribute&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">db-doc&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
You must have lower-case &lt;code>true&lt;/code> in your XLSform, even though Excel will default to &lt;code>TRUE&lt;/code>.
&lt;/div>
&lt;h3 id="example-form-model">Example Form Model&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-xml" data-lang="xml">&lt;span style="color:#204a87;font-weight:bold">&amp;lt;data&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;root_prop_1&amp;gt;&lt;/span>val A&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/root_prop_1&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;other_doc&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>whatever&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;other_prop&amp;gt;&lt;/span>val B&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/other_prop&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/other_doc&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/data&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="resulting-docs">Resulting Docs&lt;/h3>
&lt;p>Report (as before):&lt;/p>
&lt;pre>&lt;code>{
_id: '...',
_rev: '...',
type: 'report',
_attachments: { xml: ... ],
fields: {
root_prop_1: 'val A',
}
}
&lt;/code>&lt;/pre>&lt;p>Other doc:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;whatever&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;other_prop&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;val B&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="linked-docs">Linked Docs&lt;/h2>
&lt;ul>
&lt;li>Linked docs can be referred to using the doc-ref attribute, with an xpath. This can be done at any point in the model, e.g.:&lt;/li>
&lt;/ul>
&lt;h3 id="example-form-model-1">Example Form Model&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-xml" data-lang="xml">&lt;span style="color:#204a87;font-weight:bold">&amp;lt;sickness&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;sufferer&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/sickness/new&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;new&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>person&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Gómez&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;original_report&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/sickness&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/new&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/sickness&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="resulting-docs-1">Resulting Docs&lt;/h3>
&lt;p>Report:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;sufferer&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;def-456&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Other doc:&lt;/p>
&lt;pre>&lt;code>{
&amp;quot;_id&amp;quot;: &amp;quot;def-456&amp;quot;,
&amp;quot;_rev&amp;quot;: &amp;quot;...&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;person&amp;quot;,
&amp;quot;name&amp;quot;: &amp;quot;Gómez&amp;quot;,
&amp;quot;original_report&amp;quot;: &amp;quot;abc-123&amp;quot;
}
&lt;/code>&lt;/pre>&lt;h2 id="repeated-docs">Repeated Docs&lt;/h2>
&lt;ul>
&lt;li>Can have references to other docs, including the parent&lt;/li>
&lt;li>These currently cannot be linked from other docs, as no provision is made for indexing these docs&lt;/li>
&lt;/ul>
&lt;h3 id="example-form">Example Form&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-xml" data-lang="xml">&lt;span style="color:#204a87;font-weight:bold">&amp;lt;thing&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Ab&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;related&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>relative&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Bo&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/thing&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/related&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;related&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>relative&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;name&amp;gt;&lt;/span>Ca&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/name&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/thing&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/related&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/artist&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="resulting-docs-2">Resulting Docs&lt;/h3>
&lt;p>Report:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;report&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;fields&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Ab&amp;#34;&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Other docs:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;relative&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Bo&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_id&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;_rev&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;type&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;relative&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Ch&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;#34;parent&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;abc-123&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="linked-docs-example">Linked Docs Example&lt;/h2>
&lt;p>This example shows how you would register a single newborn from a delivery report.&lt;/p>
&lt;p>First, the relevant section of the delivery report XLSForm file:
&lt;img src="linked_docs_xlsform.png" alt="Delivery report">&lt;/p>
&lt;p>Here is the corresponding portion of XML generated after converting the form:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-xml" data-lang="xml">&lt;span style="color:#204a87;font-weight:bold">&amp;lt;repeat&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_repeat&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#c4a000">jr:template=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_name/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_gender/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_doc&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34; /delivery/repeat/child_repeat &amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;created_by_doc&lt;/span> &lt;span style="color:#c4a000">db-doc-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/delivery&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;name/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;sex/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;date_of_birth/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>person&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/child_repeat&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/repeat&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you&amp;rsquo;ve done your configuration correctly, all you should see when you click on the submitted report from the Reports tab is the &lt;code>child_doc&lt;/code> field with an &lt;code>_id&lt;/code> that corresponds to the linked doc. In this case, you could look for that &lt;code>_id&lt;/code> on the People tab or in the DB itself to confirm that the resulting doc looks correct.&lt;/p>
&lt;h2 id="repeated-docs-example">Repeated Docs Example&lt;/h2>
&lt;p>This example extends the above example to show how you would register one or multiple newborns from a delivery report. This allows you to handle multiple births.&lt;/p>
&lt;p>First, the relevant section of the delivery report XLSForm file:
&lt;img src="repeated_docs_xlsform.png" alt="Delivery report">&lt;/p>
&lt;p>Here is the corresponding portion of XML generated after converting the form:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-xml" data-lang="xml">&lt;span style="color:#204a87;font-weight:bold">&amp;lt;repeat&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_repeat&lt;/span> &lt;span style="color:#c4a000">db-doc=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#c4a000">jr:template=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_name/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;child_gender/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;created_by_doc&lt;/span> &lt;span style="color:#c4a000">db-docs-ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/delivery&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;name/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;sex/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;date_of_birth/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;_id/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;type&amp;gt;&lt;/span>person&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/type&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/child_repeat&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/repeat&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you&amp;rsquo;ve done your configuration correctly, all you should see when you click on the submitted report from the Reports tab is that there will be no information on the children created. You will find the created docs as siblings to the subject of the previously submitted report. Each of these child docs will have a field &lt;code>created_by_doc&lt;/code> whose value is the &lt;code>_id&lt;/code> of the report that created them. You can also look in the DB itself to confirm that the resulting docs look correct.&lt;/p></description></item><item><title>Apps: Making Calls and Sending SMS from App Forms</title><link>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/app-form-sms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/app-form-sms/</guid><description>
&lt;h2 id="triggering-calls-and-sms">Triggering Calls and SMS&lt;/h2>
&lt;p>When a XForm is loaded on a phone you can start a phone call or trigger the sending of an SMS within the form itself. This can be useful if within a task or assessment you want to tell the user to contact a patient, or perhaps a health worker at a facility.&lt;/p>
&lt;p>To set up the call or SMS you&amp;rsquo;ll need to create a link with &lt;code>tel:&lt;/code> or &lt;code>sms:&lt;/code> within a &lt;code>note&lt;/code> field. To create the link, use the markdown link format, eg &lt;code>[Call Patient](tel:+2547009875000)&lt;/code>. You can specify the content of the SMS by using the body parameter, eg &lt;code>[Send SMS](sms://+25470098765000?body=Hello World!)&lt;/code>.&lt;/p>
&lt;p>The phone number and message can be generated from fields within the XForm. For instance, if you have &lt;code>patient_name&lt;/code>, &lt;code>patient_phone&lt;/code> and &lt;code>message&lt;/code> fields, you can generate the SMS as follows:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>XLSForm&lt;/strong>
&lt;code>[Send SMS to ${patient_name}](sms://${patient_phone}?body=${message})&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>XForm&lt;/strong>
&lt;code>[Send SMS to &amp;lt;output value=&amp;quot; /data/patient_name &amp;quot;/&amp;gt;](sms://&amp;lt;output value=&amp;quot; /data/patient_phone &amp;quot;/&amp;gt;?body=&amp;lt;output value=&amp;quot; /data/message &amp;quot;/&amp;gt;)&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>If you want to use a button to make the action more obvious, this can be done using HTML and CSS within the note:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-zsh" data-lang="zsh">&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&amp;lt;span &lt;span style="color:#000">style&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;background-color: #CC0000; color:white; padding: 1em; text-decoration: none; &amp;#39;&lt;/span>&amp;gt;Call the patient&amp;lt;/span&amp;gt;&lt;span style="color:#ce5c00;font-weight:bold">](&lt;/span>tel:&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">patient_phone&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note that the SMS link notation can be interpreted differently from one phone to another. Some devices work well with &lt;code>sms:${phone}?body=${message}&lt;/code>, others with &lt;code>sms://${phone}?body=${message}&lt;/code>. You may find &lt;a href="https://bradorego.com/test/sms.html">these SMS link tests&lt;/a> helpful in determining what works on devices for your deployment.&lt;/p>
&lt;h2 id="sending-reports-as-sms">Sending reports as SMS&lt;/h2>
&lt;p>To define that an XForm should be converted to an SMS, add the field &lt;code>xml2sms&lt;/code> to the form&amp;rsquo;s CouchDB doc and assign it a truthy value (either a boolean or a string).&lt;br>
When submitting such a form, along with creating the report document, the app will try to compact the report&amp;rsquo;s content into an SMS that would be sent to the configured Gateway phone number.&lt;/p>
&lt;p>There are two formats available - either using the &lt;a href="https://opendatakit.github.io/xforms-spec/#compact-record-representation-(for-sms)">ODK&amp;rsquo;s compact record representation for SMS&lt;/a>, or Medic&amp;rsquo;s custom format.
When the form compaction fails or returns no content, no SMS will be sent.&lt;/p>
&lt;h3 id="odk-compact-record-representation-for-sms">ODK compact record representation for SMS&lt;/h3>
&lt;p>When &lt;code>xml2sms&lt;/code> field value is Boolean &lt;code>true&lt;/code>, the app will try to compact the form using this format.
To get forms sent in this format, follow the &lt;a href="https://opendatakit.github.io/xforms-spec/#compact-record-representation-(for-sms)">ODK documentation&lt;/a>.&lt;/p>
&lt;h3 id="medic-custom-sms-representation">Medic Custom SMS representation&lt;/h3>
&lt;p>To configure a form to send using Medic&amp;rsquo;s custom SMS definition, the value of &lt;code>xml2sms&lt;/code> from the form&amp;rsquo;s CouchDB doc should be an string containing an &lt;a href="https://docs.angularjs.org/guide/expression">Angular expression&lt;/a>.
This allows access to the &lt;code>fields&lt;/code> property of the &lt;code>data_record&lt;/code> doc created when saving the form submission to the database. Extra functions are also provided to make compiling a form submission more simple.&lt;/p>
&lt;h4 id="special-functions">Special Functions&lt;/h4>
&lt;h5 id="concatargs">&lt;code>concat(...args)&lt;/code>&lt;/h5>
&lt;ul>
&lt;li>
&lt;p>&lt;code>...args&lt;/code>: 0 or more values to be concatenated.&lt;/p>
&lt;pre>&lt;code> concat('A', 'bee', 'Sea') =&amp;gt; 'AbeeSea'
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h5 id="spacedargs">&lt;code>spaced(...args)&lt;/code>&lt;/h5>
&lt;ul>
&lt;li>
&lt;p>&lt;code>...args&lt;/code>: 0 or more values to be concatenated with spaces between them.&lt;/p>
&lt;pre>&lt;code> spaced('A', 'bee', 'Sea') =&amp;gt; 'A bee Sea'
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h5 id="matchval-matchers">&lt;code>match(val, matchers)&lt;/code>&lt;/h5>
&lt;ul>
&lt;li>
&lt;p>&lt;code>val&lt;/code>: the value to run matches against&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>matchers&lt;/code>: a string representing values to match and their corresponding outputs&lt;/p>
&lt;pre>&lt;code> match('a', 'a:Hay,b:bzz,c:see') =&amp;gt; 'Hay'
match('b', 'a:Hay,b:bzz,c:see') =&amp;gt; 'bzz'
match('c', 'a:Hay,b:bzz,c:see') =&amp;gt; 'c'
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ul>
&lt;h4 id="examples">Examples&lt;/h4>
&lt;h5 id="form-submission-json">Form Submission JSON&lt;/h5>
&lt;pre>&lt;code>doc.fields = {
s_acc_danger_signs: {
s_acc_danger_sign_seizure: 'no',
s_acc_danger_sign_loss_consiousness: 'yes',
s_acc_danger_sign_unable_drink: 'no',
s_acc_danger_sign_confusion: 'yes',
s_acc_danger_sign_vomit: 'no',
s_acc_danger_sign_chest_indrawing: 'yes',
s_acc_danger_sign_wheezing: 'no',
s_acc_danger_sign_bleeding: 'yes',
s_acc_danger_sign_lathargy: 'no',
has_danger_sign: 'true',
},
};
&lt;/code>&lt;/pre>
&lt;h5 id="formdocreport2sms">&lt;code>formDoc.report2sms&lt;/code>&lt;/h5>
&lt;pre>&lt;code>concat(
&amp;quot;U5 &amp;quot;,
match(doc.s_acc_danger_signs.has_danger_sign, &amp;quot;true:DANGER, false:NO_DANGER&amp;quot;),
&amp;quot; &amp;quot;,
match(doc.s_acc_danger_signs.s_acc_danger_sign_seizure, &amp;quot;yes:S&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_loss_consiousness, &amp;quot;yes:L&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_unable_drink, &amp;quot;yes:D&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_confusion, &amp;quot;yes:C&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_vomit, &amp;quot;yes:V&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_chest_indrawing, &amp;quot;yes:I&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_wheezing, &amp;quot;yes:W&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_bleeding, &amp;quot;yes:B&amp;quot;),
match(doc.s_acc_danger_signs.s_acc_danger_sign_lathargy, &amp;quot;yes:Y&amp;quot;)
)
&lt;/code>&lt;/pre>
&lt;h5 id="sms-content">SMS content&lt;/h5>
&lt;pre>&lt;code>U5 DANGER LCIB&lt;/code>&lt;/pre></description></item><item><title>Apps: Contact Forms</title><link>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/contact-forms/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/contact-forms/</guid><description>
&lt;p>Contact forms are used to create person or place types. Prior to version 3.7, CHT Core supported 4 contact types - 3 place types (clinic, health_center, district_hospital) and one person type (person). From version 3.7, an unlimited number of place and person types are supported. Each contact-type should ideally have two forms; one for creation, and another for editing.&lt;/p>
&lt;p>These forms are stored in the &lt;code>forms/contact&lt;/code> subfolder of the project config directory. The naming convention used sould be &lt;code>&amp;lt;contact_type_id-{create|edit}&amp;gt;.xlsx&lt;/code>. The &lt;code>contact_type_id&lt;/code> prefix should match what&amp;rsquo;s specified in the contact form settings page.&lt;/p>
&lt;p>&lt;em>See Also:&lt;/em> &lt;a href=https://docs.communityhealthtoolkit.org/beta/apps/reference/forms/contact/#>Reference Documentation for Contact Forms&lt;/a>&lt;/p>
&lt;h2 id="person-type-forms">Person-type forms&lt;/h2>
&lt;p>These have the simplest structure since we are only creating one thing - the actual contact. Below, we&amp;rsquo;ll look at the structure of the survey and settings sheets since these are critical to ensuring the contact is created correctly at the appropriate part of the hierarchy.&lt;/p>
&lt;h3 id="survey-sheet">Survey sheet&lt;/h3>
&lt;p>&lt;img src="person-contact-form-survey.png" alt="Person forms survey sheet">&lt;/p>
&lt;p>Section 1 and 3 are optional. We can pull in details of the logged in user as shown in section 1 and use that to log some metadata on the created documents as shown in section 3.&lt;/p>
&lt;p>Section 2 contains the core components of what will be saved in couchdb. The group name needs to match the contact type id specified in app_settings.json (if using the configurable hierarchy) or &lt;code>person&lt;/code> if using the old-style hierarchy. To learn more about setting up configurable hieararchy, review the &lt;a href="https://docs.communityhealthtoolkit.org/beta/apps/reference/app-settings/hierarchy/">Hierarchy&lt;/a> page. &lt;code>parent&lt;/code>, &lt;code>type&lt;/code>, &lt;code>contact_type&lt;/code> and &lt;code>name&lt;/code> attributes are mandatory for things to work correctly.&lt;/p>
&lt;h2 id="settings-sheet">Settings sheet&lt;/h2>
&lt;p>&lt;img src="person-contact-form-settings.png" alt="Person forms settings sheet">&lt;/p>
&lt;p>We&amp;rsquo;ll need to replace &lt;code>PLACE_NAME&lt;/code> with a name that corresponds to the created contact type. We&amp;rsquo;ll also need to replace &lt;code>PLACE_TYPE&lt;/code> with the contact-type id specified in app_settings.json (for configurable ones) or &lt;code>person&lt;/code>.&lt;/p>
&lt;h2 id="place-type-forms">Place-type forms&lt;/h2>
&lt;p>The main difference between place type and person type forms is that we can optionally create one or more person-type documents one of which can be linked to the created place as a contact.&lt;/p>
&lt;p>We&amp;rsquo;ll look at a simple structure of a place forms showing all the necessary components&lt;/p>
&lt;p>&lt;img src="place-contact-form-survey.png" alt="Place forms survey sheet">&lt;/p>
&lt;p>Section 1 is similar to what has been described earlier for person forms.&lt;/p>
&lt;p>Section 2 specifies the contact that will be linked to the place being created. &lt;code>parent&lt;/code>, &lt;code>type&lt;/code> and &lt;code>contact_type&lt;/code> and &lt;code>name&lt;/code> are mandatory. This also applies to the place-type definition in section 4. &lt;code>contact&lt;/code> on the other hand is not mandatory for the successful creation of a place. It usually more conventient to create a place and it&amp;rsquo;s primary contact at the same time.&lt;/p>
&lt;p>You can also create additional contacts linked to the place being created when you have a structure similar to that shown in section 3.&lt;/p>
&lt;h2 id="contact-edit-forms">Contact-edit forms&lt;/h2>
&lt;p>The edit forms are much simpler in structure and one can specify only the relevant fields that need editing. The name of the group should match the contact-type being edited and the field names should correspond to what is saved in Couchdb.&lt;/p>
&lt;p>&lt;img src="contact-edit-form.png" alt="Contact edit form survey sheet">&lt;/p>
&lt;h2 id="generic-contact-forms">Generic contact forms&lt;/h2>
&lt;p>If your place forms are similar across all levels of your specified project hiearachy, you can templatise the form creation process. You&amp;rsquo;ll need to create the following files: &lt;code>place-type.json&lt;/code>, &lt;code>PLACE_TYPE-create.xlsx&lt;/code> and &lt;code>PLACE_TYPE-edit.xlsx&lt;/code>.&lt;/p>
&lt;p>&lt;code>place-type.json&lt;/code> maps the place contact-type to a human readable description that will be shown on the app&amp;rsquo;s user interface.&lt;/p>
&lt;p>Both &lt;code>PLACE_TYPE-create.xlsx&lt;/code> and &lt;code>PLACE_TYPE-edit.xlsx&lt;/code> will contain two placeholder values &lt;code>PLACE_TYPE&lt;/code> and &lt;code>PLACE_NAME&lt;/code> which will be replaced by the keys and values specified in &lt;code>place-type.json&lt;/code> respectively during form conversion. Also, copies of the different place-type forms will be created (if they don&amp;rsquo;t exist) during the form conversion process with &lt;code>PLACE_TYPE&lt;/code> being replaced with the keys specified in &lt;code>place-type.json&lt;/code>.&lt;/p>
&lt;p>For examples on how to structure the above files you can have a look at the sample configurations in CHT-core: &lt;a href="https://github.com/medic/cht-core/tree/master/config/default/forms/contact">default&lt;/a> and &lt;a href="https://github.com/medic/cht-core/tree/master/config/standard/forms/contact">standard&lt;/a>.&lt;/p></description></item><item><title>Apps: Including Multimedia in Forms</title><link>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/multimedia/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/multimedia/</guid><description>
&lt;h2 id="multimedia-formats">Multimedia Formats&lt;/h2>
&lt;p>There are many supported formats for video, audio, and images. We recommend using h.264(mpeg) for video, jpeg for images, and mp3 for audio. When creating videos or images keep in mind the dimensions and storage capabilities on phones that may be used. Lower end phones have smaller storage and screen sizes. When rendering images, video, and audio the CHT uses the browser&amp;rsquo;s built in rendering tools. This means you can render any media format that is supported by the &lt;a href="https://docs.communityhealthtoolkit.org/beta/core/overview/supported-software/#dependencies">minimum version of Chrome&lt;/a>.&lt;/p>
&lt;p>&lt;strong>List of Supported formats&lt;/strong> &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats#Browser_compatibility">video/audio&lt;/a>
&lt;a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types">images&lt;/a>&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>To play multimedia from forms you need to add elements to your xml and upload the corresponding multimedia to couchdb as an attachment to your form.&lt;/p>
&lt;h3 id="form-config">Form Config&lt;/h3>
&lt;p>Add an xml element of text and another element of value. Set form equal to the type of multimedia being used(video, audio, image). The value element must contain &lt;code>jr://file_name.suffix&lt;/code> where &lt;code>file_name.suffix&lt;/code> is the name of your multimedia file uploaded to couchdb.&lt;/p>
&lt;p>Example:&lt;/p>
&lt;pre>&lt;code>&amp;lt;text id=&amp;quot;somevideo&amp;quot;&amp;gt;
&amp;lt;value form=&amp;quot;video&amp;quot;&amp;gt;jr://video.mp4&amp;lt;/value&amp;gt;
&amp;lt;/text&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Display Example:&lt;/p>
&lt;pre>&lt;code>&amp;lt;input ref=&amp;quot;q2&amp;quot;&amp;gt;
&amp;lt;label ref=&amp;quot;jr:itext('somevideo')&amp;quot;/&amp;gt;
&amp;lt;/input&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Here is a sample form that will display a video and/or image. When this form is opened a video player will be displayed so the user can watch the video. Forms support displaying of images and playing of audio files.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-xml" data-lang="xml"> &lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:html&lt;/span> &lt;span style="color:#c4a000">xmlns=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/2002/xforms&amp;#34;&lt;/span>
&lt;span style="color:#c4a000">xmlns:h=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/1999/xhtml&amp;#34;&lt;/span>
&lt;span style="color:#c4a000">xmlns:ev=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/2001/xml-events&amp;#34;&lt;/span>
&lt;span style="color:#c4a000">xmlns:xsd=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://www.w3.org/2001/XMLSchema&amp;#34;&lt;/span>
&lt;span style="color:#c4a000">xmlns:jr=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://openrosa.org/javarosa&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:head&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:title&amp;gt;&lt;/span>Multimedia - Demo Form&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:title&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;model&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;itext&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;translation&lt;/span> &lt;span style="color:#c4a000">lang=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;en&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">&amp;lt;!-- Attach sample media files to form doc --&amp;gt;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic">&amp;lt;!-- https://sample-videos.com --&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;text&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;somevideo&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;value&lt;/span> &lt;span style="color:#c4a000">form=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;video&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>jr://video.mp4&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/value&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/text&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;text&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;someimage&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;value&lt;/span> &lt;span style="color:#c4a000">form=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;image&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>jr://image.jpg&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/value&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/text&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;text&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;someaudio&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;value&lt;/span> &lt;span style="color:#c4a000">form=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;audio&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>jr://audio.mp3&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/value&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/text&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/translation&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/itext&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;instance&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;media&lt;/span> &lt;span style="color:#c4a000">id=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;multimedia&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;meta&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;instanceID/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/meta&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/media&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/instance&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/model&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:head&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;h:body&lt;/span> &lt;span style="color:#c4a000">class=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;pages&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;group&lt;/span> &lt;span style="color:#c4a000">appearance=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;field-list&amp;#34;&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;g&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;input&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;q2&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;label&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;jr:itext(&amp;#39;somevideo&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/input&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;input&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;q3&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;label&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;jr:itext(&amp;#39;someimage&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/input&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;input&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;q3&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;label&lt;/span> &lt;span style="color:#c4a000">ref=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;jr:itext(&amp;#39;someaudio&amp;#39;)&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">/&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/input&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/group&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:body&amp;gt;&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">&amp;lt;/h:html&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="couchdb-config">Couchdb Config&lt;/h3>
&lt;p>The file needs to be added as an attachment with a name that matches what is defined in the form. This can be added by using curl or fauxton. Here is the structure of the curl command.&lt;/p>
&lt;p>&lt;code>curl -vX PUT https://user:pass@server_name/medic/&amp;lt;form_doc_id&amp;gt;/&amp;lt;attachment_name.suffix&amp;gt;?rev=&amp;lt;latest_form_revision&amp;gt; --data-binary @&amp;lt;local_file_name&amp;gt; -H &amp;quot;Content-Type: &amp;lt;expected_mime_type&amp;gt;&amp;quot;&lt;/code>&lt;/p>
&lt;p>Here is an example of how it would look uploading a sample video for the form above.&lt;/p>
&lt;p>&lt;code>curl -vX PUT https://user:pass@localhost/medic/form:multimedia/video.mp4?rev=11-a2ebf09cb9678c031859cd2c1da4b603 -k --data-binary @sample.mp4 -H &amp;quot;Content-Type: video/mp4&amp;quot;&lt;/code>&lt;/p>
&lt;p>To use fauxton.&lt;/p>
&lt;ol>
&lt;li>Navigate to fauxton. &lt;code>https://&amp;lt;server_name&amp;gt;/_utils&lt;/code>&lt;/li>
&lt;li>Click on the medic database.&lt;/li>
&lt;li>Locate the form document.&lt;/li>
&lt;li>Click add attachment&lt;/li>
&lt;li>Upload the multimedia file and ensure the name matches what has been defined in the form.&lt;/li>
&lt;/ol></description></item><item><title>Apps: Customizing Titles in the Reports List</title><link>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/report-titles/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.communityhealthtoolkit.org/beta/apps/guides/forms/report-titles/</guid><description>
&lt;p>&lt;em>Added in 3.9.0&lt;/em>&lt;/p>
&lt;p>By default the CHT shows the name of the subject of the report in the reports list. This can be overridden by configuring the &lt;code>subject_key&lt;/code> property with a translation key in the form document.&lt;/p>
&lt;p>The translation uses a summary of the report as the evaluation context so you can include report fields in your value, for example: &lt;code>Case registration {{case_id}}&lt;/code>. Useful properties available in the summary include: &lt;code>from&lt;/code> (the phone number of the sender), &lt;code>phone&lt;/code> (the phone number of the report contact), &lt;code>form&lt;/code> (the form code), &lt;code>subject.name&lt;/code> (the name of the subject), and &lt;code>case_id&lt;/code> (the generated case id).&lt;/p>
&lt;h2 id="code-sample">Code Sample&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json"> &lt;span style="color:#4e9a06">&amp;#34;internalId&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;signal&amp;#34;&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;title&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Signal signoff&amp;#34;&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;subject_key&amp;#34;&lt;/span>&lt;span style="color:#a40000">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;signal.list.subject&amp;#34;&lt;/span>&lt;span style="color:#a40000">,&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>