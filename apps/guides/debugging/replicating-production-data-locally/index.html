<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.71.1"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Replicating Production Data Locally | Community Health Toolkit</title><meta property="og:title" content="Replicating Production Data Locally"><meta property="og:description" content="How to copy data from an instance to a local CouchDB database and app"><meta property="og:type" content="article"><meta property="og:url" content="https://docs.communityhealthtoolkit.org/apps/guides/debugging/replicating-production-data-locally/"><meta property="article:modified_time" content="2020-07-31T13:46:14-07:00"><meta property="og:site_name" content="Community Health Toolkit"><meta itemprop=name content="Replicating Production Data Locally"><meta itemprop=description content="How to copy data from an instance to a local CouchDB database and app"><meta itemprop=dateModified content="2020-07-31T13:46:14-07:00"><meta itemprop=wordCount content="921"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Replicating Production Data Locally"><meta name=twitter:description content="How to copy data from an instance to a local CouchDB database and app"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-168418637-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=/scss/main.min.b49a62ff85f2711d9a7ea2511925db921a52b0a75270b09a9a4021dc2217b498.css as=style><link href=/scss/main.min.b49a62ff85f2711d9a7ea2511925db921a52b0a75270b09a9a4021dc2217b498.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Community Health Toolkit</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/apps/reference/><span>Reference</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class=td-sidebar-nav__section><a class="td-sidebar-link td-sidebar-link__page" id=m-why-the-cht href=/why-the-cht/>Why the CHT?</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section">CHT Applications&nbsp;&nbsp;<i class="fas fa-caret-down"></i></a></li><ul><li class="collapse show" id=apps><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/concepts/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Concepts&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsaccess href=/apps/concepts/access/>Access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsnavigation href=/apps/concepts/navigation/>Navigation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsforms href=/apps/concepts/forms/>Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptscare-guides href=/apps/concepts/care-guides/>Care Guides</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsworkflows href=/apps/concepts/workflows/>Workflows</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptshierarchy href=/apps/concepts/hierarchy/>Hierarchies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsusers href=/apps/concepts/users/>Users</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsinteroperability href=/apps/concepts/interoperability/>Interoperability</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsconceptsprerequisites href=/apps/concepts/prerequisites/>Prerequisites</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Features&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeatures><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/contacts/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Contacts&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturescontacts></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/messaging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Messaging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesmessaging></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/reports/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Reports&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesreports></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/supervision/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Supervision&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturessupervision></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/tasks/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tasks&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturestasks></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/targets/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Targets&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturestargets></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/uhc-mode/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">UHC Mode&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesuhc-mode></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/admin/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">App Management&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesadmin></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/features/integrations/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Integrations&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsfeaturesintegrations><a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsandroid href=/apps/features/integrations/android/>Android</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationscustom href=/apps/features/integrations/custom/>Custom</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsdhis2 href=/apps/features/integrations/dhis2/>DHIS2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsopenmrs href=/apps/features/integrations/openmrs/>OpenMRS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsoppia href=/apps/features/integrations/oppia/>OppiaMobile</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsfeaturesintegrationsrapidpro href=/apps/features/integrations/rapidpro/>RapidPro</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/examples/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Examples&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsexamples><a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesanc href=/apps/examples/anc/>Maternal & Newborn Health</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescontact-tracing href=/apps/examples/contact-tracing/>Contact Tracing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesphc-covid href=/apps/examples/phc-covid/>COVID-19 Adaptations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescovid-education href=/apps/examples/covid-education/>COVID-19 Education</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplescovid-rdt-reference-app href=/apps/examples/covid-rdt-reference-app/>COVID-19 Testing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplesebs href=/apps/examples/ebs/>Event Based Surveillance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexampleslearning-care href=/apps/examples/learning-care/>Learning & Care</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsexamplestraining href=/apps/examples/training/>Remote Training</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/tutorials/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tutorials&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appstutorials><a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialslocal-setup href=/apps/tutorials/local-setup/>Local Setup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-and-users-1 href=/apps/tutorials/contact-and-users-1/>Contacts + Users 1</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-and-users-2 href=/apps/tutorials/contact-and-users-2/>Contacts + Users 2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapplication-settings href=/apps/tutorials/application-settings/>Application Settings</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialssms-forms href=/apps/tutorials/sms-forms/>SMS Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialssms-schedules href=/apps/tutorials/sms-schedules/>SMS Schedules</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapp-forms href=/apps/tutorials/app-forms/>App Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsform-properties href=/apps/tutorials/form-properties/>Form Properties</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstasks-1 href=/apps/tutorials/tasks-1/>Tasks</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstargets href=/apps/tutorials/targets/>Targets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscontact-summary href=/apps/tutorials/contact-summary/>Contact Summary</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsdeath-reporting href=/apps/tutorials/death-reporting/>Death Report Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialscondition-cards href=/apps/tutorials/condition-cards/>Condition Cards</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialslocalizing-cht href=/apps/tutorials/localizing-cht/>Localization</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialsapplication-graphics href=/apps/tutorials/application-graphics/>Branding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appstutorialstasks-2 href=/apps/tutorials/tasks-2/>Complex Tasks</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section">Quick Guides&nbsp;&nbsp;<i class="fas fa-caret-down"></i></a></li><ul><li class="collapse show" id=appsguides><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/onboarding/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Onboarding&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesonboarding></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/data/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Data&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdata><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatahydration href=/apps/guides/data/hydration/>Document hydration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatausers-bulk-load href=/apps/guides/data/users-bulk-load/>Bulk Load Users</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatafixing-data-in-wrong-location href=/apps/guides/data/fixing-data-in-wrong-location/>Detecting and fixing data on the wrong server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdataimpact-metrics href=/apps/guides/data/impact-metrics/>CHT Impact Metrics</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatacsv-to-docs href=/apps/guides/data/csv-to-docs/>CSV to Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatainvalid-reports href=/apps/guides/data/invalid-reports/>Invalid Reports</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/database/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Database&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesdatabase><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasemuting_in_dashboards href=/apps/guides/database/muting_in_dashboards/>Contact Muting in SQL queries</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasecouch2pg-oom-errors href=/apps/guides/database/couch2pg-oom-errors/>Couch2pg Memory Errors</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasecouchdb-authentication href=/apps/guides/database/couchdb-authentication/>CouchDB Authentication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabasedatabase-conflicts href=/apps/guides/database/database-conflicts/>Database Conflicts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabaserdbms-from-mac href=/apps/guides/database/rdbms-from-mac/>RDBMS from MacOS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdatabaserdbms-from-windows href=/apps/guides/database/rdbms-from-windows/>RDBMS from Windows</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/debugging/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section">Debugging&nbsp;&nbsp;<i class="fas fa-caret-down"></i></a></li><ul><li class="collapse show" id=appsguidesdebugging><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingobtaining-logs href=/apps/guides/debugging/obtaining-logs/>Obtaining Logs</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-appsguidesdebuggingreplicating-production-data-locally href=/apps/guides/debugging/replicating-production-data-locally/>Production Data</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesdebuggingsecure-sharing-of-developer-instance href=/apps/guides/debugging/secure-sharing-of-developer-instance/>Securely Sharing Your Development Environment</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/forms/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Forms&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesforms><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsuhc-mode href=/apps/guides/forms/uhc-mode/>UHC Mode</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsadditional-docs href=/apps/guides/forms/additional-docs/>Additional Docs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsapp-form-sms href=/apps/guides/forms/app-form-sms/>App Form SMS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformscontact-forms href=/apps/guides/forms/contact-forms/>Contact Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsgoogle-drive href=/apps/guides/forms/google-drive/>Fetching forms from Google Drive</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsmultimedia href=/apps/guides/forms/multimedia/>Multimedia in Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformswealth-quintiles href=/apps/guides/forms/wealth-quintiles/>Quintiles</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesformsreport-titles href=/apps/guides/forms/report-titles/>Report Titles</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/hosting/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Hosting&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguideshosting><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingrequirements href=/apps/guides/hosting/requirements/>Requirements</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingec2-setup-guide href=/apps/guides/hosting/ec2-setup-guide/>AWS Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingself-hosting href=/apps/guides/hosting/self-hosting/>Self Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingapp-developer href=/apps/guides/hosting/app-developer/>App Developer Hosting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingssl-cert-install href=/apps/guides/hosting/ssl-cert-install/>SSL Cert Install</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguideshostingoffline href=/apps/guides/hosting/offline/>Offline Hosting</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/integrations/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Integrations&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesintegrations><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/integrations/best-practices/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Best Practices&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesintegrationsbest-practices><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsbest-practicesrapidpro href=/apps/guides/integrations/best-practices/rapidpro/>RapidPro</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsdhis2-aggregate href=/apps/guides/integrations/dhis2-aggregate/>DHIS2 Aggregate</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsopenmrs href=/apps/guides/integrations/openmrs/>OpenMRS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsoppia href=/apps/guides/integrations/oppia/>OppiaMobile</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesintegrationsrapidpro href=/apps/guides/integrations/rapidpro/>RapidPro</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Messaging&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaging><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/gateways/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Gateways&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaginggateways><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/messaging/gateways/gateway/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">CHT Gateway&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesmessaginggatewaysgateway><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewayconfiguration href=/apps/guides/messaging/gateways/gateway/configuration/>Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewayphones href=/apps/guides/messaging/gateways/gateway/phones/>Phones</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysgatewaytroubleshooting href=/apps/guides/messaging/gateways/gateway/troubleshooting/>Troubleshooting</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysafricas-talking href=/apps/guides/messaging/gateways/africas-talking/>Africa's Talking</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessaginggatewaysrapidpro href=/apps/guides/messaging/gateways/rapidpro/>RapidPro</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingsms-states href=/apps/guides/messaging/sms-states/>SMS States</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingshortcodes href=/apps/guides/messaging/shortcodes/>Contact IDs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesmessagingmessage-loops href=/apps/guides/messaging/message-loops/>Message Loops</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/performance/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Performance&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesperformance><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancepurging href=/apps/guides/performance/purging/>Purging</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancereplication href=/apps/guides/performance/replication/>Replication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesperformancetelemetry href=/apps/guides/performance/telemetry/>Telemetry</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/privacy/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Privacy&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesprivacy><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesprivacyprivacy-policy href=/apps/guides/privacy/privacy-policy/>Adding Policies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesprivacypolicy href=/apps/guides/privacy/policy/>Medic’s Policy</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/security/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Security&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidessecurity><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidessecuritysecuring-android href=/apps/guides/security/securing-android/>Securing Android</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/tasks/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Tasks&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidestasks><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestaskspass-data-to-form href=/apps/guides/tasks/pass-data-to-form/>Passing Data from Tasks to Forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestasksquery-task-data href=/apps/guides/tasks/query-task-data/>Querying Task Documents</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidestaskstask-schema-parameters href=/apps/guides/tasks/task-schema-parameters/>Task Schema Parameters</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/guides/updates/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Updates&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsguidesupdates><a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesupdatesmoving-contacts href=/apps/guides/updates/moving-contacts/>Moving Contacts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsguidesupdatescollect-forms-update href=/apps/guides/updates/collect-forms-update/>Remote Collect Update</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Reference&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreference><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapi href=/apps/reference/api/>API</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/forms/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">forms/&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreferenceforms><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformsapp href=/apps/reference/forms/app/>app</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformscollect href=/apps/reference/forms/collect/>collect</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceformscontact href=/apps/reference/forms/contact/>contact</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceresources href=/apps/reference/resources/>resources/</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetranslations href=/apps/reference/translations/>translations/</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/apps/reference/app-settings/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">app_settings.json&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=appsreferenceapp-settings><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsaccept_case_reports href=/apps/reference/app-settings/accept_case_reports/>.accept_case_reports</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingshierarchy href=/apps/reference/app-settings/hierarchy/>.contact_types</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsdhis2 href=/apps/reference/app-settings/dhis2/>.dhis_data_sets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsforms href=/apps/reference/app-settings/forms/>.forms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsheader_tabs href=/apps/reference/app-settings/header_tabs/>.header_tabs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsoutbound href=/apps/reference/app-settings/outbound/>.outbound</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingspatient_reports href=/apps/reference/app-settings/patient_reports/>.patient_reports</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsuser-permissions href=/apps/reference/app-settings/user-permissions/>.permissions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsregistrations href=/apps/reference/app-settings/registrations/>.registrations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreminders href=/apps/reference/app-settings/reminders/>.reminders</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreplication_depth href=/apps/reference/app-settings/replication_depth/>.replication_depth</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsreplications href=/apps/reference/app-settings/replications/>.replications</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsuser-roles href=/apps/reference/app-settings/user-roles/>.roles</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingsschedules href=/apps/reference/app-settings/schedules/>.schedules</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingssms href=/apps/reference/app-settings/sms/>.sms</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingstoken_login href=/apps/reference/app-settings/token_login/>.token_login</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferenceapp-settingstransitions href=/apps/reference/app-settings/transitions/>.transitions</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencecontact-page href=/apps/reference/contact-page/>contact-summary.templated.js</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetargets href=/apps/reference/targets/>targets.js</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-appsreferencetasks href=/apps/reference/tasks/>tasks.js</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">CHT Core Framework&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=core><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/overview/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Overview&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreoverview><a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewarchitecture href=/core/overview/architecture/>Architecture</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewroadmap href=/core/overview/roadmap/>Roadmap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewdb-schema href=/core/overview/db-schema/>Database Schema</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewoffline-first href=/core/overview/offline-first/>Offline-First</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewpwa href=/core/overview/pwa/>Progressive Web App</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewdata-flows-for-analytics href=/core/overview/data-flows-for-analytics/>Data Flows</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewtransitions href=/core/overview/transitions/>Sentinel Transitions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreoverviewtranslations href=/core/overview/translations/>Translations</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/releases/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Releases&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=corereleases><a class="td-sidebar-link td-sidebar-link__page" id=m-corereleasesfeature_releases href=/core/releases/feature_releases/>Feature Releases</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreguides><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesreleasing href=/core/guides/releasing/>Releasing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesupdate-dependencies href=/core/guides/update-dependencies/>Dependencies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesfixing-e2e-tests href=/core/guides/fixing-e2e-tests/>E2E Tests</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/core/guides/android/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Android&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=coreguidesandroid><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroiddevelopment-setup href=/core/guides/android/development-setup/>Development Environment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidreleasing href=/core/guides/android/releasing/>Releasing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidpublishing href=/core/guides/android/publishing/>Publishing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesandroidbranding href=/core/guides/android/branding/>CHT Android Flavors</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesusing-npm href=/core/guides/using-npm/>Using NPM</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesusing-windows href=/core/guides/using-windows/>Windows Development</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coreguidesdocker-setup href=/core/guides/docker-setup/>Docker Use</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Design System&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=design><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/personas/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Personas&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designpersonas><a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaschw-janet href=/design/personas/chw-janet/>CHW</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaschw-supervisor-ann href=/design/personas/chw-supervisor-ann/>CHW Supervisor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasregional-manager-christina href=/design/personas/regional-manager-christina/>Regional Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasnurse-mary href=/design/personas/nurse-mary/>Nurse</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasdata-manager-paul href=/design/personas/data-manager-paul/>Data Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonasapp-builder href=/design/personas/app-builder/>App Builders</a><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/personas/partners/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Partners&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designpersonaspartners><a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnersimplementers href=/design/personas/partners/implementers/>Implementers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnerslocal-governments href=/design/personas/partners/local-governments/>Local Gov</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designpersonaspartnersnational-governments href=/design/personas/partners/national-governments/>National Gov</a></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/best-practices/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Best Practices&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designbest-practices></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/components/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Component Library&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designcomponents></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Icon Library&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designicons><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/forms_tasks_targets/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Forms, Tasks, Targets&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designiconsforms_tasks_targets></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/icons/people_and_places/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">People and Places&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designiconspeople_and_places></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/guides/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Quick Guides&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designguides><a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesdesigning-interviews href=/design/guides/designing-interviews/>User Interviews</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesempathy-map href=/design/guides/empathy-map/>Empathy Map</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesproblem-statement href=/design/guides/problem-statement/>Problem Statement</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-designguidesmapping-hierarchy href=/design/guides/mapping-hierarchy/>Mapping Hierarchy</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/design/mockups/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Mockups&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=designmockups></li></ul></ul></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Contributing&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contribute><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/code/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Code&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contributecode><a class="td-sidebar-link td-sidebar-link__page" id=m-contributecodeworkflow href=/contribute/code/workflow/>Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributecodestyle-guide href=/contribute/code/style-guide/>Style Guide</a></li></ul></ul><ul class=td-sidebar-nav__section><li class=td-sidebar-nav__section-title><a href=/contribute/docs/ class="align-left pl-0 collapsed td-sidebar-link td-sidebar-link__section">Documentation&nbsp;&nbsp;<i class="fas fa-caret-right"></i></a></li><ul><li class=collapse id=contributedocs><a class="td-sidebar-link td-sidebar-link__page" id=m-contributedocsworkflow href=/contribute/docs/workflow/>Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-contributedocsstyle-guide href=/contribute/docs/style-guide/>Style Guide</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-contributecode-of-conduct href=/contribute/code-of-conduct/>Code of Conduct</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-glossary href=/glossary/>Glossary</a></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/medic/cht-docs/edit/main/content/en/apps/guides/debugging/replicating-production-data-locally.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/medic/cht-docs/issues/new?title=Improve+%27Replicating%20Production%20Data%20Locally%27&labels=enhancement&body=Page:+/apps/guides/debugging/replicating-production-data-locally/%0aVersion:+2020-07-31%2013:46:14%20-0700%20-0700%0a---" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/medic/cht-core/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#first-a-note-about-data-safety>First, a note about data safety</a></li><li><a href=#step-1-get-the-data>Step 1: Get the data</a><ul><li><a href=#small-production-instances>Small production instances</a></li><li><a href=#large-production-instances>Large production instances</a></li><li><a href=#regardless-do-this-too>Regardless, do this too</a></li></ul></li><li><a href=#step-2-run-it-locally>Step 2, run it locally</a><ul><li><a href=#option-1-local-development-environment>Option 1, local development environment</a></li><li><a href=#option-2-horticulturalist>Option 2, horticulturalist</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://docs.communityhealthtoolkit.org/apps/>CHT Applications</a></li><li class=breadcrumb-item><a href=https://docs.communityhealthtoolkit.org/apps/guides/>Quick Guides</a></li><li class=breadcrumb-item><a href=https://docs.communityhealthtoolkit.org/apps/guides/debugging/>Debugging</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://docs.communityhealthtoolkit.org/apps/guides/debugging/replicating-production-data-locally/>Production Data</a></li></ol></nav><div class=td-content><h1>Replicating Production Data Locally</h1><div class=lead>How to copy data from an instance to a local CouchDB database and app</div><p>Sometimes there will be a production problem that you need to dig into locally to solve. This guide explains how to:</p><ul><li>Copy the data from an instance to a local CouchDB database</li><li>Run a local webapp instance with that data</li></ul><h2 id=first-a-note-about-data-safety>First, a note about data safety</h2><p>Production data is medical data. It&rsquo;s HIV statuses and pregnancies. It&rsquo;s important, and it&rsquo;s not yours. If you&rsquo;re downloading it, do so on an encrypted drive and delete it once you&rsquo;re done with it.</p><h2 id=step-1-get-the-data>Step 1: Get the data</h2><p>First thing is to get the data onto your local CouchDB. It&rsquo;s advisable to create a new DB for this, so that you have a fresh untouched collection of data that isn&rsquo;t mixed in with anything you have locally.</p><h3 id=small-production-instances>Small production instances</h3><p>If there isn&rsquo;t much data you can replicate the entire DB locally. You can initiate this either from your local Fauxton, or from the command line. You must use an administrator username and password for this at both the source and destination.</p><p>For Fauxton, navigate to http://localhost:5984/_utils/#/replication/_create
For command line, see: <a href=http://docs.couchdb.org/en/2.1.1/api/server/common.html#post--_replicate>http://docs.couchdb.org/en/2.1.1/api/server/common.html#post--_replicate</a></p><p>Note that replication may stall on one document, and you may end up with your local DB having one less document than the source. This is due to how our URLs are setup: the replicator gets confused and considers <code>login</code> (ie <code>https://url/login</code>) to be a document. You can safely ignore this difference - you&rsquo;re good to go once your destination database has one less document than the source.</p><h3 id=large-production-instances>Large production instances</h3><p>If the instance is too large to replicate locally (or you are too impatient), you can replicate the data accessible to a single user. This process downloads a user&rsquo;s data into a browser and then copies that data into a CouchDB database.</p><ol><li>Open Firefox and navigate to <code>about:config</code>. Set <code>security.csp.enable</code> to <code>false</code> to disable Content Security Policies.</li><li>Navigate to the instance and login as the user with the data you want. <em>(If you want more data, like an entire district, you could consider logging in as a new user with a contact document at your desired place in the contact hierarchy. But that is an exercise for the reader)</em></li><li>Wait for the data to replicate. You know this is done once the app lets you interact with it. <em>(If you want to get the user&rsquo;s data before purging, consider disabling purging. Another exercise for the reader)</em></li><li>Make sure your local CouchDB has CORS enabled: <a href="http://docs.couchdb.org/en/2.1.1/config/http.html?highlight=CORs">http://docs.couchdb.org/en/2.1.1/config/http.html?highlight=CORs</a>. Consider using <a href=https://github.com/pouchdb/add-cors-to-couchdb#user-content-what-it-does>add-cors-to-couchdb</a> or its recommended settings.</li><li>Allow your CouchDB to be accessible via <code>https</code>. One way is to run <code>ngrok http 5984</code> to make your CouchDB accessible via a url like <code>https://abcd1234.ngrok.io</code>.</li><li>Open the console in Firefox and run <code>await PouchDB.replicate('medic-user-XXX', 'https://your:admin@abcd1234.ngrok.io/YYY');</code>. Here <code>XXX</code> is the name you logged in as, and <code>YYY</code> is the name of a database in which to store the data.<ul><li><strong>Note</strong>: If you get 401s make sure that: your CouchDB credentials are right; and you don&rsquo;t have a local session in the same browser already (session cookies can take precedence over basic auth); and if you&rsquo;re running CouchDB in Docker you have exposed both <code>5984</code> and <code>5986</code> to localhost.</li></ul></li><li>Wait for the replication to complete. In Fauxton you should see the database YYY with the same number of documents reported during the user&rsquo;s initial replication.</li><li>Log out of the instance and clear your data from the developer console (Application -> Clear storage).</li><li>Navigate to <code>about:config</code>. Set <code>security.csp.enable</code> to <code>true</code> to re-enable Content Security Policies.</li></ol><h3 id=regardless-do-this-too>Regardless, do this too</h3><p>To log in as a specific prod user you need to also copy them from the prod <code>_users</code> database into your own local <code>_users</code> database. The simplest way to do this is to just open the DB in Fauxton, find the document and copy it on your clipboard, then create a new document in your local <code>_users</code> DB and paste it in, deleting the <code>_rev</code> property.</p><p>You could also use this opportunity to change the password to something easier to work with locally. To do this, add a <code>password</code> property into the document with the password you want in plain text. CouchDB will convert this to a properly hashed password on save.</p><h2 id=step-2-run-it-locally>Step 2, run it locally</h2><p>First you need to decide if you need a local development environment (unless you already have one, in which case you might as well use it), or are happy to just use <a href=https://github.com/medic/horticulturalist>Horticulturalist</a>.</p><p>A local development environment will be useful to you if:</p><ul><li>You want to change code locally</li><li>You want to see useful, non-minified stack traces, or otherwise browse / step through non-minified code in the browser</li><li>You want to deploy a version of the code older than <code>2.14.0</code>, as they are not available in Horticulturalist&rsquo;s repos.</li></ul><h3 id=option-1-local-development-environment>Option 1, local development environment</h3><p>If you don&rsquo;t already have a local dev env, follow the instructions on the <a href=https://github.com/medic/cht-core/blob/master/DEVELOPMENT.md>development setup instructions</a>.</p><p>Then you need to:</p><ol><li>Push the code you want to run via <code>COUCH_URL=http://your:admin@localhost:5984/YYY grunt deploy</code>.</li><li>Start API and Sentinel by running <code>COUCH_URL=http://your:admin@localhost:5984/YYY node api/server</code>.</li></ol><p>Once you&rsquo;ve done all of that you should be able to log in with your user.</p><h3 id=option-2-horticulturalist>Option 2, horticulturalist</h3><p>Follow the instructions on the <a href=https://github.com/medic/horticulturalist>horticulturalist repo</a> to get it installed. Then:</p><ol><li>Make sure that the <code>medic</code> DB doesn&rsquo;t exist, so that you have a fresh database.</li><li>Replicate your local PROD DB into a new <code>medic</code> database using the Fauxton console.</li><li>Run <code>horti --local --bootstrap=XXX</code>, where <code>XXX</code> is the version you want to use (maybe the same one as production?)</li></ol><p>You should now be able to log in as that user locally!</p><h2 id=related-content>Related Content</h2><div class=section-index><hr class=panel-line><div class=entry><h5><a href=/apps/guides/performance/replication/>CHT Applications >
Quick Guides >
Performance >
Replication</a></h5><p class=one-liner>Settings for downloading copies of data onto a user&rsquo;s device.</p></div></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/medic/cht-docs/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/medic/cht-docs/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified 31.07.2020: <a href=https://github.com/medic/cht-docs/commit/c769ca57f8e5f8c84234b4528e3fd4efe73d4008>Fix named anchor 4/N #260 (c769ca5)</a><div class="d-xl-none d-print-none meta-links"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/medic/cht-docs/edit/main/content/en/apps/guides/debugging/replicating-production-data-locally.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/medic/cht-docs/issues/new?title=Improve+%27Replicating%20Production%20Data%20Locally%27&labels=enhancement&body=Page:+/apps/guides/debugging/replicating-production-data-locally/%0aVersion:+2020-07-31%2013:46:14%20-0700%20-0700%0a---" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/medic/cht-core/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div></div></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 CHT All Rights Reserved</small>
<small class=ml-1><a href="https://docs.google.com/document/d/1MaI1rgYMNyCZF2eEjBuvnBDoCYHDKlx4k_N5pkDiWu8/edit?usp=sharing" target=_blank>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.fe96fb3036eca951c7eb0789e66bdef1d3d7e75919b9ecf624883f34a0f4272e.js integrity="sha256-/pb7MDbsqVHH6weJ5mve8dPX51kZuez2JIg/NKD0Jy4=" crossorigin=anonymous></script></body></html>